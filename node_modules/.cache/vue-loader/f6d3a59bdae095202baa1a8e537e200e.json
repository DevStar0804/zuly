{"remainingRequest":"D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\working\\Vue\\zuly\\src\\pages\\Store.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\working\\Vue\\zuly\\src\\pages\\Store.vue","mtime":1603970856961},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gJ3Z1ZScNCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycNCmltcG9ydCB7IEVkaXRvciwgRWRpdG9yQ29udGVudCwgRWRpdG9yTWVudUJhciwgRWRpdG9yTWVudUJ1YmJsZSB9IGZyb20gJ3RpcHRhcCcNCmltcG9ydCB7DQogIEJsb2NrcXVvdGUsDQogIEJ1bGxldExpc3QsDQogIENvZGVCbG9jaywNCiAgSGFyZEJyZWFrLA0KICBIZWFkaW5nLA0KICBIb3Jpem9udGFsUnVsZSwNCiAgTGlzdEl0ZW0sDQogIE9yZGVyZWRMaXN0LA0KICBUb2RvSXRlbSwNCiAgVG9kb0xpc3QsDQogIEJvbGQsDQogIENvZGUsDQogIEl0YWxpYywNCiAgTGluaywNCiAgU3RyaWtlLA0KICBVbmRlcmxpbmUsDQogIEhpc3RvcnkNCn0gZnJvbSAndGlwdGFwLWV4dGVuc2lvbnMnDQppbXBvcnQgJ2xlYWZsZXQvZGlzdC9sZWFmbGV0LmNzcycNCmltcG9ydCAnLi4vLi4vcHVibGljL21lbnViYXIuc2NzcycNCmltcG9ydCAnLi4vLi4vcHVibGljL21lbnVidWJibGUuc2NzcycNCmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnDQpWdWUudXNlKGF4aW9zKQ0KY29uc3QgU1RBVFVTX0lOSVRJQUwgPSAwDQpjb25zdCBTVEFUVVNfU0FWSU5HID0gMQ0KY29uc3QgU1RBVFVTX1NVQ0NFU1MgPSAyDQpjb25zdCBTVEFUVVNfRkFJTEVEID0gMw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgRWRpdG9yQ29udGVudCwNCiAgICBFZGl0b3JNZW51QmFyLA0KICAgIEVkaXRvck1lbnVCdWJibGUNCiAgfSwNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHN0b3JlX2lkOiBudWxsLA0KICAgICAgc3RvcmU6IHt9LA0KICAgICAgZWRpdG9yOiBuZXcgRWRpdG9yKHsNCiAgICAgICAgb25CbHVyOiAoeyBldmVudCB9KSA9PiB7DQogICAgICAgICAgdGhpcy5VcGRhdGVDb21wYW55KGV2ZW50KQ0KICAgICAgICB9LA0KICAgICAgICBleHRlbnNpb25zOiBbDQogICAgICAgICAgbmV3IEJsb2NrcXVvdGUoKSwNCiAgICAgICAgICBuZXcgQnVsbGV0TGlzdCgpLA0KICAgICAgICAgIG5ldyBDb2RlQmxvY2soKSwNCiAgICAgICAgICBuZXcgSGFyZEJyZWFrKCksDQogICAgICAgICAgbmV3IEhlYWRpbmcoeyBsZXZlbHM6IFsxLCAyLCAzXSB9KSwNCiAgICAgICAgICBuZXcgSG9yaXpvbnRhbFJ1bGUoKSwNCiAgICAgICAgICBuZXcgTGlzdEl0ZW0oKSwNCiAgICAgICAgICBuZXcgT3JkZXJlZExpc3QoKSwNCiAgICAgICAgICBuZXcgVG9kb0l0ZW0oKSwNCiAgICAgICAgICBuZXcgVG9kb0xpc3QoKSwNCiAgICAgICAgICBuZXcgTGluaygpLA0KICAgICAgICAgIG5ldyBCb2xkKCksDQogICAgICAgICAgbmV3IENvZGUoKSwNCiAgICAgICAgICBuZXcgSXRhbGljKCksDQogICAgICAgICAgbmV3IFN0cmlrZSgpLA0KICAgICAgICAgIG5ldyBVbmRlcmxpbmUoKSwNCiAgICAgICAgICBuZXcgSGlzdG9yeSgpDQogICAgICAgIF0sDQogICAgICAgIGNvbnRlbnQ6ICcnDQogICAgICB9KSwNCiAgICAgIEN1cnJlbnRDYXRlZ29yaWVzOiBbXSwNCiAgICAgIENhdGVnb3JpZXM6IFtdLA0KICAgICAgY3VycmVudGNhdGVnb3J5OiAnJywNCiAgICAgIGFkZGNhdGVnb3J5OiAnJywNCiAgICAgIG1haW5jYXRlZ29yeTogJycsDQogICAgICBkZWxldGVjYXRlZ29yeTogJycsDQogICAgICBjYXRlZ29yeWltZzogJycsDQogICAgICBJbWdVcmxzOiBbXSwNCiAgICAgIGRlbGV0ZWltZzogJycsDQogICAgICBjb21wYW55X25hbWU6IFN0cmluZywNCiAgICAgIGxhdGl0dWRlOiBOdW1iZXIsDQogICAgICBsb25naXR1ZGU6IE51bWJlciwNCiAgICAgIHB1YmxpY1BhdGg6IHByb2Nlc3MuZW52LkJBU0VfVVJMLA0KICAgICAgc2hvd19tYXA6IGZhbHNlLA0KICAgICAgQ3VycmVudExpbmtzOiBbXSwNCiAgICAgIExpbmtzOiBbXSwNCiAgICAgIGFkZGxpbms6ICcnLA0KICAgICAgYWRkbGlua3VybDogJycsDQogICAgICB1cGxvYWRlZEZpbGVzOiBbXSwNCiAgICAgIHVwbG9hZEVycm9yOiBudWxsLA0KICAgICAgY3VycmVudFN0YXR1czogbnVsbCwNCiAgICAgIHVwbG9hZEZpZWxkTmFtZTogJ2NvbnRlbnRzJywNCiAgICAgIG9wZW53ZWVrOiAnc2VsZWN0ZWQnLA0KICAgICAgbGl2ZXdlZWs6ICdzZWxlY3RlZCcsDQogICAgICBPcGVuaW5nSG91cnM6IFtdLA0KICAgICAgQ3VycmVudE9wZW5pbmdIb3Vyczoge30sDQogICAgICBDdXJyZW50TGl2ZVN0cmVhbWluZzoge30sDQogICAgICBMaXZlU3RyZWFtaW5nOiBbXSwNCiAgICAgIGxpbmtVcmw6IG51bGwsDQogICAgICBsaW5rTWVudUlzQWN0aXZlOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgYmVmb3JlRGVzdHJveSAoKSB7DQogICAgdGhpcy5lZGl0b3IuZGVzdHJveSgpDQogIH0sDQogIHdhdGNoOiB7DQogICAgb3BlbndlZWs6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMuT3BlbmluZ0hvdXJzID0gdGhpcy5DdXJyZW50T3BlbmluZ0hvdXJzW3RoaXMub3BlbndlZWtdDQogICAgfSwNCiAgICBsaXZld2VlazogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5MaXZlU3RyZWFtaW5nID0gdGhpcy5DdXJyZW50TGl2ZVN0cmVhbWluZ1t0aGlzLmxpdmV3ZWVrXQ0KICAgIH0sDQogICAgYWRkY2F0ZWdvcnk6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLkN1cnJlbnRDYXRlZ29yaWVzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLk1haW5DYXRlZ29yeSgpDQogICAgICB9DQogICAgICB0aGlzLkFkZENhdGVnb3J5KCkudGhlbigoZGF0YSkgPT4gew0KICAgICAgICBpZiAoZGF0YSA9PT0gJ29rJykgew0KICAgICAgICAgIHRoaXMuQ2F0ZWdvcmllcy5mb3JFYWNoKChjYXRlZ29yeSkgPT4gew0KICAgICAgICAgICAgaWYgKGNhdGVnb3J5LmlkID09PSB0aGlzLmFkZGNhdGVnb3J5KSB7DQogICAgICAgICAgICAgIGFsZXJ0KCdBZ2dpdW50aSBpICcgKyBjYXRlZ29yeS5kaXNwbGF5ICsgJyBjb24gc3VjY2Vzc28hJykNCiAgICAgICAgICAgICAgdGhpcy5DdXJyZW50Q2F0ZWdvcmllcy5wdXNoKHsNCiAgICAgICAgICAgICAgICBrZXk6IGNhdGVnb3J5LmlkLA0KICAgICAgICAgICAgICAgIHZhbHVlOiBjYXRlZ29yeS5pZCwNCiAgICAgICAgICAgICAgICB0ZXh0OiBjYXRlZ29yeS5kaXNwbGF5DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIG1haW5jYXRlZ29yeTogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5NYWluQ2F0ZWdvcnkoKS50aGVuKChkYXRhKSA9PiB7DQogICAgICAgIGlmIChkYXRhID09PSAnb2snKSB7DQogICAgICAgICAgdGhpcy5DYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7DQogICAgICAgICAgICBpZiAoY2F0ZWdvcnkuaWQgPT09IHRoaXMubWFpbmNhdGVnb3J5KSB7DQogICAgICAgICAgICAgIGFsZXJ0KA0KICAgICAgICAgICAgICAgICdTZWxlemlvbmF0byBjb24gc3VjY2Vzc28gaSAnICsNCiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LmRpc3BsYXkgKw0KICAgICAgICAgICAgICAgICAgJyBjb21lIGNhdGVnb3JpYSBwcmluY2lwYWxlIScNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBkZWxldGVjYXRlZ29yeTogZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKGNvbmZpcm0oJ1Z1b2kgcmltdW92ZXJlIHF1ZXN0YSBjYXRlZ29yaWE/JykpIHsNCiAgICAgICAgdGhpcy5EZWxldGVDYXRlZ29yeSgpLnRoZW4oKGRhdGEpID0+IHsNCiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy5DYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7DQogICAgICAgICAgICAgIGlmIChjYXRlZ29yeS5pZCA9PT0gdGhpcy5kZWxldGVjYXRlZ29yeSkgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCdFbGltaW5hdG8gY29uIHN1Y2Nlc3NvIGkgJyArIGNhdGVnb3J5LmRpc3BsYXkgKyAnIScpDQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLkN1cnJlbnRDYXRlZ29yaWVzKSB7DQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5DdXJyZW50Q2F0ZWdvcmllc1tpXS52YWx1ZSA9PT0gdGhpcy5kZWxldGVjYXRlZ29yeSkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkN1cnJlbnRDYXRlZ29yaWVzLnNwbGljZShpLCAxKQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBhZGRsaW5rdXJsOiBmdW5jdGlvbiAoKSB7DQogICAgICBsZXQgZmxhZyA9IHRydWUNCiAgICAgIHRoaXMuQ3VycmVudExpbmtzLmZvckVhY2goKGxpbmspID0+IHsNCiAgICAgICAgaWYgKHRoaXMuYWRkbGluayA9PT0gbGluay5saW5rX2lkKSB7DQogICAgICAgICAgZmxhZyA9IGZhbHNlDQogICAgICAgICAgYWxlcnQoJ0lsICcgKyBsaW5rLmRpc3BsYXkgKyAnIGVzaXN0ZSBnacOgIScpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICBpZiAoZmxhZykgew0KICAgICAgICB0aGlzLkFkZExpbmsoKS50aGVuKChkYXRhKSA9PiB7DQogICAgICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgICAgIHRoaXMuTGlua3MuZm9yRWFjaCgobGluaykgPT4gew0KICAgICAgICAgICAgICBpZiAodGhpcy5hZGRsaW5rID09PSBsaW5rLmlkKSB7DQogICAgICAgICAgICAgICAgdGhpcy5DdXJyZW50TGlua3MucHVzaCh7DQogICAgICAgICAgICAgICAgICBpZDogZGF0YS5pZCwNCiAgICAgICAgICAgICAgICAgIGxpbmtfaWQ6IGxpbmsuaWQsDQogICAgICAgICAgICAgICAgICBkaXNwbGF5OiBsaW5rLmRpc3BsYXksDQogICAgICAgICAgICAgICAgICBpbWFnZTogbGluay5pbWFnZSwNCiAgICAgICAgICAgICAgICAgIHVybDogdGhpcy5hZGRsaW5rdXJsDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICBhbGVydCgnQWdnaXVudG8gY29uIHN1Y2Nlc3NvIGlsICcgKyBsaW5rLmRpc3BsYXkgKyAnIScpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBpc0luaXRpYWwgKCkgew0KICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXR1cyA9PT0gU1RBVFVTX0lOSVRJQUwNCiAgICB9LA0KICAgIGlzU2F2aW5nICgpIHsNCiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0dXMgPT09IFNUQVRVU19TQVZJTkcNCiAgICB9LA0KICAgIGlzU3VjY2VzcyAoKSB7DQogICAgICByZXR1cm4gdGhpcy5jdXJyZW50U3RhdHVzID09PSBTVEFUVVNfU1VDQ0VTUw0KICAgIH0sDQogICAgaXNGYWlsZWQgKCkgew0KICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXR1cyA9PT0gU1RBVFVTX0ZBSUxFRA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJlc2V0ICgpIHsNCiAgICAgIC8vIHJlc2V0IGZvcm0gdG8gaW5pdGlhbCBzdGF0ZQ0KICAgICAgdGhpcy5jdXJyZW50U3RhdHVzID0gU1RBVFVTX0lOSVRJQUwNCiAgICAgIHRoaXMudXBsb2FkZWRGaWxlcyA9IFtdDQogICAgICB0aGlzLnVwbG9hZEVycm9yID0gbnVsbA0KICAgIH0sDQogICAgc2F2ZSAoZm9ybURhdGEpIHsNCiAgICAgIC8vIHVwbG9hZCBkYXRhIHRvIHRoZSBzZXJ2ZXINCiAgICAgIHRoaXMuY3VycmVudFN0YXR1cyA9IFNUQVRVU19TQVZJTkcNCg0KICAgICAgdGhpcy51cGxvYWQoZm9ybURhdGEpDQogICAgICAgIC50aGVuKCh4KSA9PiB7DQogICAgICAgICAgdGhpcy51cGxvYWRlZEZpbGVzID0gW10uY29uY2F0KHgpDQogICAgICAgICAgdGhpcy5jdXJyZW50U3RhdHVzID0gU1RBVFVTX1NVQ0NFU1MNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICB0aGlzLnVwbG9hZEVycm9yID0gZXJyLnJlc3BvbnNlDQogICAgICAgICAgdGhpcy5jdXJyZW50U3RhdHVzID0gU1RBVFVTX0ZBSUxFRA0KICAgICAgICB9KQ0KICAgIH0sDQogICAgZmlsZXNDaGFuZ2UgKGZpZWxkTmFtZSwgZmlsZUxpc3QpIHsNCiAgICAgIC8vIGhhbmRsZSBmaWxlIGNoYW5nZXMNCiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCkNCiAgICAgIGlmICghZmlsZUxpc3QubGVuZ3RoKSByZXR1cm4NCiAgICAgIGZvcm1EYXRhLmFwcGVuZChmaWVsZE5hbWUsIGZpbGVMaXN0WzBdLCBmaWxlTGlzdFswXS5uYW1lKQ0KICAgICAgLy8gc2F2ZSBpdA0KICAgICAgdGhpcy5zYXZlKGZvcm1EYXRhKQ0KICAgIH0sDQogICAgdXBsb2FkIChmb3JtRGF0YSkgew0KICAgICAgcmV0dXJuIGZldGNoKGAvYXBpL3N0b3Jlcy8ke3RoaXMuc3RvcmVfaWR9L2ltYWdlc2AsIHsNCiAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgIGJvZHk6IGZvcm1EYXRhLA0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywNCiAgICAgICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgICAudGhlbigoeCkgPT4geC5qc29uKCkpDQogICAgICAgIC50aGVuKCh4KSA9PiB7DQogICAgICAgICAgdGhpcy5zYXZlaW1hZ2UoeC5pZCwgZm9ybURhdGEpDQogICAgICAgIH0pDQogICAgfSwNCiAgICBzYXZlaW1hZ2UgKGlkLCBmb3JtRGF0YSkgew0KICAgICAgcmV0dXJuIGZldGNoKGAvYXBpL3N0b3Jlcy8ke3RoaXMuc3RvcmVfaWR9L2ltYWdlcy8ke2lkfWAsIHsNCiAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywNCiAgICAgICAgICBtaW1ldHlwZTogZm9ybURhdGEuZ2V0QWxsKCdjb250ZW50cycpWzBdLnR5cGUNCiAgICAgICAgfSwNCiAgICAgICAgYm9keTogZm9ybURhdGENCiAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICBpZiAodGhpcy5JbWdVcmxzLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICB0aGlzLkltZ1VybHMucHVzaCh7DQogICAgICAgICAgICAgICAgaWQ6IHJlcy5pZCwNCiAgICAgICAgICAgICAgICB1cmw6IGAvYXBpL3N0b3Jlcy8ke3RoaXMuc3RvcmVfaWR9L2ltYWdlcy8ke3Jlcy5pZH1gLA0KICAgICAgICAgICAgICAgIGNsYXNzbmFtZTogJ2Nhcm91c2VsLWl0ZW0gYWN0aXZlJw0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICBhbGVydCgnQWdnaXVudG8gY29uIHN1Y2Nlc3NvIScpDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLkltZ1VybHMucHVzaCh7DQogICAgICAgICAgICAgICAgaWQ6IHJlcy5pZCwNCiAgICAgICAgICAgICAgICB1cmw6IGAvYXBpL3N0b3Jlcy8ke3RoaXMuc3RvcmVfaWR9L2ltYWdlcy8ke3Jlcy5pZH1gLA0KICAgICAgICAgICAgICAgIGNsYXNzbmFtZTogJ2Nhcm91c2VsLWl0ZW0nDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIGFsZXJ0KCdBZ2dpdW50byBjb24gc3VjY2Vzc28hJykNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgfSwNCiAgICBhc3luYyBEZWxldGVJbWFnZSAoaWQpIHsNCiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goDQogICAgICAgIGAvYXBpL3N0b3Jlcy8ke3RoaXMuc3RvcmVfaWR9L2ltYWdlcy8ke2lkfWAsDQogICAgICAgIHsNCiAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLA0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsDQogICAgICAgICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgKQ0KICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgIGZvcihsZXQgaSBpbiB0aGlzLkltZ1VybHMpew0KICAgICAgICAgIGlmKHRoaXMuSW1nVXJsc1tpXS5pZCA9PSBpZCl7DQogICAgICAgICAgICB0aGlzLkltZ1VybHMuc3BsaWNlKGksMSkNCiAgICAgICAgICAgIGlmKHRoaXMuSW1nVXJscy5sZW5ndGghPT0wKQ0KICAgICAgICAgICAgICBpZihpPT10aGlzLkltZ1VybHMubGVuZ3RoKQ0KICAgICAgICAgICAgICAgIHRoaXMuSW1nVXJsc1swXS5jbGFzc25hbWUgPSAnY2Fyb3VzZWwtaXRlbSBhY3RpdmUnDQogICAgICAgICAgICAgIGVsc2UgdGhpcy5JbWdVcmxzW2ldLmNsYXNzbmFtZSA9ICdjYXJvdXNlbC1pdGVtIGFjdGl2ZScNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgYWxlcnQoJ0VsaW1pbmF0byBjb24gc3VjY2Vzc28hJykNCiAgICAgIH0NCiAgICAgIHJldHVybiByZXNwb25zZQ0KICAgIH0sDQogICAgYXN5bmMgU2VsZWN0TG9nbyAobG9nb2lkKSB7DQogICAgICBpZiAoY29uZmlybSgnVnVvaSBzY2VnbGllcmUgcXVlc3RhIGltbWFnaW5lIGNvbWUgaW1tYWdpbmUgZGVsIHR1byBsb2dvPycpKSB7DQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvc3RvcmVzLyR7dGhpcy5zdG9yZV9pZH1gLCB7DQogICAgICAgICAgbWV0aG9kOiAnUFVUJywNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLA0KICAgICAgICAgIH0sDQogICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeydsb2dvX2lkJzogbG9nb2lkfSkNCiAgICAgICAgfSkNCiAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApew0KICAgICAgICAgIGFsZXJ0KCdFbGltaW5hdG8gY29uIHN1Y2Nlc3NvIScpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlDQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBVcGRhdGVDb21wYW55IChldmVudCkgew0KICAgICAgbGV0IGRhdGEgPSB7fQ0KICAgICAgY29uc29sZS5sb2coZXZlbnQpDQogICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9PT0gJ1Byb3NlTWlycm9yIFByb3NlTWlycm9yLWZvY3VzZWQnKSB7DQogICAgICAgIGRhdGEgPSB7IGRlc2NyaXB0aW9uOiBldmVudC50YXJnZXQuaW5uZXJIVE1MIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHN3aXRjaCAoZXZlbnQudGFyZ2V0Lm5hbWUpIHsNCiAgICAgICAgICBjYXNlICdjb21wYW55X25hbWUnOg0KICAgICAgICAgICAgZGF0YSA9IHsgY29tcGFueV9uYW1lOiBldmVudC50YXJnZXQudmFsdWUgfQ0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICBjYXNlICdhZGRyZXNzJzoNCiAgICAgICAgICAgIGRhdGEgPSB7IGFkZHJlc3M6IGV2ZW50LnRhcmdldC52YWx1ZSB9DQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIGNhc2UgJ2NpdHknOg0KICAgICAgICAgICAgZGF0YSA9IHsgY2l0eTogZXZlbnQudGFyZ2V0LnZhbHVlIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgY2FzZSAnemlwJzoNCiAgICAgICAgICAgIGRhdGEgPSB7IHppcDogZXZlbnQudGFyZ2V0LnZhbHVlIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgY2FzZSAndmF0X2lkJzoNCiAgICAgICAgICAgIGRhdGEgPSB7IHZhdF9pZDogZXZlbnQudGFyZ2V0LnZhbHVlIH0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgY2FzZSAnZmlzY2FsX2NvZGUnOg0KICAgICAgICAgICAgZGF0YSA9IHsgZmlzY2FsX2NvZGU6IGV2ZW50LnRhcmdldC52YWx1ZSB9DQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICBicmVhaw0KICAgICAgICB9DQogICAgICB9DQogICAgICBmZXRjaChgL2FwaS9zdG9yZXMvJHt0aGlzLnN0b3JlX2lkfWAsIHsNCiAgICAgICAgbWV0aG9kOiAnUFVUJywNCiAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgfSwNCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSkNCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgIGFsZXJ0KCdBZ2dpb3JuYXRvIGNvbiBzdWNjZXNzbyEnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgVXBkYXRlT3BlbmluZyAoaSwgZXZlbnQpIHsNCiAgICAgIGlmIChldmVudC50YXJnZXQudmFsdWUgPT09ICcnKSB7DQogICAgICAgIHRoaXMuQ3VycmVudE9wZW5pbmdIb3Vyc1t0aGlzLm9wZW53ZWVrXS5zcGxpY2UoaSwgMSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICghdGhpcy5DdXJyZW50T3BlbmluZ0hvdXJzW3RoaXMub3BlbndlZWtdKSB7DQogICAgICAgICAgdGhpcy5DdXJyZW50T3BlbmluZ0hvdXJzW3RoaXMub3BlbndlZWtdID0gW10NCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5DdXJyZW50T3BlbmluZ0hvdXJzW3RoaXMub3BlbndlZWtdLmxlbmd0aCA9PT0gaSkgew0KICAgICAgICAgIHRoaXMuQ3VycmVudE9wZW5pbmdIb3Vyc1t0aGlzLm9wZW53ZWVrXVtpXSA9IFtdDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5DdXJyZW50T3BlbmluZ0hvdXJzW3RoaXMub3BlbndlZWtdW2ldWzBdID0gZXZlbnQudGFyZ2V0LnZhbHVlLnNwbGl0KCcsJylbMF0NCiAgICAgICAgdGhpcy5DdXJyZW50T3BlbmluZ0hvdXJzW3RoaXMub3BlbndlZWtdW2ldWzFdID0gZXZlbnQudGFyZ2V0LnZhbHVlLnNwbGl0KCcsJylbMV0NCiAgICAgIH0NCiAgICAgIGxldCBkYXRhID0gew0KICAgICAgICBvcGVuaW5nX2hvdXJzOiBKU09OLnN0cmluZ2lmeSh0aGlzLkN1cnJlbnRPcGVuaW5nSG91cnMpDQogICAgICB9DQogICAgICBmZXRjaChgL2FwaS9zdG9yZXMvJHt0aGlzLnN0b3JlX2lkfWAsIHsNCiAgICAgICAgbWV0aG9kOiAnUFVUJywNCiAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgfSwNCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSkNCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgIGFsZXJ0KCdBZ2dpb3JuYXRvIGNvbiBzdWNjZXNzbyEnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgYXN5bmMgVXBkYXRlTGl2aW5nIChpLCBldmVudCkgew0KICAgICAgaWYgKGV2ZW50LnRhcmdldC52YWx1ZSA9PT0gJycpIHsNCiAgICAgICAgdGhpcy5DdXJyZW50TGl2ZVN0cmVhbWluZ1t0aGlzLmxpdmV3ZWVrXS5zcGxpY2UoaSwgMSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICghdGhpcy5DdXJyZW50TGl2ZVN0cmVhbWluZ1t0aGlzLmxpdmV3ZWVrXSkgew0KICAgICAgICAgIHRoaXMuQ3VycmVudExpdmVTdHJlYW1pbmdbdGhpcy5saXZld2Vla10gPSBbXQ0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLkN1cnJlbnRMaXZlU3RyZWFtaW5nW3RoaXMubGl2ZXdlZWtdLmxlbmd0aCA9PT0gaSkgew0KICAgICAgICAgIHRoaXMuQ3VycmVudExpdmVTdHJlYW1pbmdbdGhpcy5saXZld2Vla11baV0gPSBbXQ0KICAgICAgICB9DQogICAgICAgIHRoaXMuQ3VycmVudExpdmVTdHJlYW1pbmdbdGhpcy5saXZld2Vla11baV1bMF0gPSBldmVudC50YXJnZXQudmFsdWUuc3BsaXQoJywnKVswXQ0KICAgICAgICB0aGlzLkN1cnJlbnRMaXZlU3RyZWFtaW5nW3RoaXMubGl2ZXdlZWtdW2ldWzFdID0gZXZlbnQudGFyZ2V0LnZhbHVlLnNwbGl0KCcsJylbMV0NCiAgICAgIH0NCiAgICAgIGxldCBkYXRhID0gew0KICAgICAgICBsaXZlX3N0cmVhbWluZ19vcGVuaW5nX2hvdXJzOiBKU09OLnN0cmluZ2lmeSh0aGlzLkN1cnJlbnRMaXZlU3RyZWFtaW5nKQ0KICAgICAgfQ0KICAgICAgZmV0Y2goYC9hcGkvc3RvcmVzLyR7dGhpcy5zdG9yZV9pZH1gLCB7DQogICAgICAgIG1ldGhvZDogJ1BVVCcsDQogICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgIH0sDQogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpDQogICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICBhbGVydCgnQWdnaW9ybmF0byBjb24gc3VjY2Vzc28hJykNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLmxhdGl0dWRlICYmIHRoaXMubG9uZ2l0dWRlKSB7DQogICAgICAgIHRoaXMuc2hvd19tYXAgPSB0cnVlDQogICAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgLy8gdXBkYXRlIG1hcA0KICAgICAgICAgIGNvbnN0IG15SWNvbiA9IEwuaWNvbih7DQogICAgICAgICAgICBpY29uVXJsOiB0aGlzLnB1YmxpY1BhdGggKyAnaWNvbnMvZmF2aWNvbi5wbmcnLA0KICAgICAgICAgICAgaWNvblNpemU6IFszMiwgMzJdLA0KICAgICAgICAgICAgc2hhZG93U2l6ZTogWzM4LCAzOF0sIC8vIHNpemUgb2YgdGhlIHNoYWRvdw0KICAgICAgICAgICAgaWNvbkFuY2hvcjogWzIyLCA5NF0sDQogICAgICAgICAgICBzaGFkb3dBbmNob3I6IFs0LCA2Ml0sDQogICAgICAgICAgICBwb3B1cEFuY2hvcjogWy0zLCAtOTBdDQogICAgICAgICAgfSkNCiAgICAgICAgICB2YXIgbWFwID0gTC5tYXAoJ21hcCcsIHsNCiAgICAgICAgICAgIGRyYWdnaW5nOiAhTC5Ccm93c2VyLm1vYmlsZSwNCiAgICAgICAgICAgIHRhcDogIUwuQnJvd3Nlci5tb2JpbGUNCiAgICAgICAgICB9KS5zZXRWaWV3KFt0aGlzLmxhdGl0dWRlLCB0aGlzLmxvbmdpdHVkZV0sIDE3KQ0KICAgICAgICAgIEwudGlsZUxheWVyKCdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsIHsNCiAgICAgICAgICAgIGF0dHJpYnV0aW9uOg0KICAgICAgICAgICAgICAnJmNvcHk7IDxhIGhyZWY9Imh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJw0KICAgICAgICAgIH0pLmFkZFRvKG1hcCkNCiAgICAgICAgICBMLm1hcmtlcihbdGhpcy5sYXRpdHVkZSwgdGhpcy5sb25naXR1ZGVdLCB7IGljb246IG15SWNvbiB9KQ0KICAgICAgICAgICAgLmFkZFRvKG1hcCkNCiAgICAgICAgICAgIC5iaW5kUG9wdXAodGhpcy5jb21wYW55X25hbWUpDQogICAgICAgICAgICAub3BlblBvcHVwKCkNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGZldGNoU3RvcmUgKHN0b3JlSWQpIHsNCiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvc3RvcmVzLycgKyBzdG9yZUlkLCB7DQogICAgICAgIG1vZGU6ICduby1jb3JzJywNCiAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgIGFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpDQogICAgfSwNCiAgICBhc3luYyBmZXRjaENhdGVnb3J5ICgpIHsNCiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvY2F0ZWdvcmllcycsIHsNCiAgICAgICAgbW9kZTogJ25vLWNvcnMnLA0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgYWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkNCiAgICB9LA0KICAgIGFzeW5jIGZldGNoTGluayAoKSB7DQogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2xpbmtzJywgew0KICAgICAgICBtb2RlOiAnbm8tY29ycycsDQogICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgIH0sDQogICAgYXN5bmMgQWRkQ2F0ZWdvcnkgKCkgew0KICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgNCiAgICAgICAgYC9hcGkvc3RvcmVzLyR7dGhpcy5zdG9yZV9pZH0vY2F0ZWdvcmllcy8ke3RoaXMuYWRkY2F0ZWdvcnl9YCwNCiAgICAgICAgew0KICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgIG1vZGU6ICduby1jb3JzJywNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICApDQogICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpDQogICAgfSwNCiAgICBhc3luYyBNYWluQ2F0ZWdvcnkgKCkgew0KICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgNCiAgICAgICAgYC9hcGkvc3RvcmVzLyR7dGhpcy5zdG9yZV9pZH0vY2F0ZWdvcmllcy8ke3RoaXMubWFpbmNhdGVnb3J5fS9tYWluYCwNCiAgICAgICAgew0KICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgIG1vZGU6ICduby1jb3JzJywNCiAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICApDQogICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpDQogICAgfSwNCiAgICBhc3luYyBEZWxldGVDYXRlZ29yeSAoKSB7DQogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKA0KICAgICAgICBgL2FwaS9zdG9yZXMvJHt0aGlzLnN0b3JlX2lkfS9jYXRlZ29yaWVzLyR7dGhpcy5kZWxldGVjYXRlZ29yeX1gLA0KICAgICAgICB7DQogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgbW9kZTogJ25vLWNvcnMnLA0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICkNCiAgICAgIHJldHVybiByZXNwb25zZQ0KICAgIH0sDQogICAgYXN5bmMgQWRkTGluayAoKSB7DQogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKA0KICAgICAgICBgL2FwaS9zdG9yZXMvJHt0aGlzLnN0b3JlX2lkfS9saW5rcy8ke3RoaXMuYWRkbGlua31gLA0KICAgICAgICB7DQogICAgICAgICAgbWV0aG9kOiAnUE9TVCcsDQogICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywNCiAgICAgICAgICAgIGFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgICAgfSwNCiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHVybDogdGhpcy5hZGRsaW5rdXJsIH0pDQogICAgICAgIH0NCiAgICAgICkNCiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCkNCiAgICB9LA0KICAgIGFzeW5jIERlbGV0ZUxpbmsgKGlkKSB7DQogICAgICBpZiAoY29uZmlybSgnVnVvaSByaW11b3ZlcmUgcXVlc3RhIGNhdGVnb3JpYT8nKSkgew0KICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuQ3VycmVudExpbmtzKSB7DQogICAgICAgICAgaWYgKHRoaXMuQ3VycmVudExpbmtzW2ldLmlkID09PSBpZCkgew0KICAgICAgICAgICAgdGhpcy5DdXJyZW50TGlua3Muc3BsaWNlKGksIDEpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goDQogICAgICAgICAgYC9hcGkvc3RvcmVzLyR7dGhpcy5zdG9yZV9pZH0vbGlua3MvJHtpZH1gLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLA0KICAgICAgICAgICAgbW9kZTogJ25vLWNvcnMnLA0KICAgICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICApDQogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgIGFsZXJ0KCdFbGltaW5hdG8gY29uIHN1Y2Nlc3NvIScpDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlDQogICAgICB9DQogICAgfSwNCiAgICBvbkNhdGVnb3J5Q2hhbmdlIChjdXJyZW50Y2F0ZWdvcnkpIHsNCiAgICAgIHRoaXMuQ2F0ZWdvcmllcy5mb3JFYWNoKChjYXRlZ29yeSkgPT4gew0KICAgICAgICBpZiAoY2F0ZWdvcnkuaWQgPT09IGN1cnJlbnRjYXRlZ29yeSkgew0KICAgICAgICAgIHRoaXMuY2F0ZWdvcnlpbWcgPSBjYXRlZ29yeS5pbWFnZQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgc2hvd0xpbmtNZW51IChhdHRycykgew0KICAgICAgdGhpcy5saW5rVXJsID0gYXR0cnMuaHJlZg0KICAgICAgdGhpcy5saW5rTWVudUlzQWN0aXZlID0gdHJ1ZQ0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLiRyZWZzLmxpbmtJbnB1dC5mb2N1cygpDQogICAgICB9KQ0KICAgIH0sDQogICAgaGlkZUxpbmtNZW51ICgpIHsNCiAgICAgIHRoaXMubGlua1VybCA9IG51bGwNCiAgICAgIHRoaXMubGlua01lbnVJc0FjdGl2ZSA9IGZhbHNlDQogICAgfSwNCiAgICBzZXRMaW5rVXJsIChjb21tYW5kLCB1cmwpIHsNCiAgICAgIGNvbW1hbmQoeyBocmVmOiB1cmwgfSkNCiAgICAgIHRoaXMuaGlkZUxpbmtNZW51KCkNCiAgICB9DQogIH0sDQogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsNCiAgICB0aGlzLnJlc2V0KCkNCiAgICB0aGlzLnN0b3JlX2lkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkDQogICAgdGhpcy5mZXRjaFN0b3JlKHRoaXMuc3RvcmVfaWQpLnRoZW4oKGRhdGEpID0+IHsNCiAgICAgIHRoaXMuc3RvcmUgPSBkYXRhDQogICAgICB0aGlzLmVkaXRvci5zZXRDb250ZW50KGRhdGEuZGVzY3JpcHRpb24pDQogICAgICB0aGlzLmxhdGl0dWRlID0gZGF0YS5sYXRpdHVkZQ0KICAgICAgdGhpcy5sb25naXR1ZGUgPSBkYXRhLmxvbmdpdHVkZQ0KICAgICAgdGhpcy5jb21wYW55X25hbWUgPSBkYXRhLmNvbXBhbnlfbmFtZQ0KICAgICAgdGhpcy5DdXJyZW50TGlua3MgPSBkYXRhLmxpbmtzDQogICAgICBpZiAoZGF0YS5vcGVuaW5nX2hvdXJzICE9IG51bGwpIHsNCiAgICAgICAgdGhpcy5DdXJyZW50T3BlbmluZ0hvdXJzID0gZGF0YS5vcGVuaW5nX2hvdXJzDQogICAgICB9DQogICAgICBpZiAoZGF0YS5saXZlX3N0cmVhbWluZ19vcGVuaW5nX2hvdXJzICE9IG51bGwpIHsNCiAgICAgICAgdGhpcy5DdXJyZW50TGl2ZVN0cmVhbWluZyA9IGRhdGEubGl2ZV9zdHJlYW1pbmdfb3BlbmluZ19ob3Vycw0KICAgICAgfQ0KICAgICAgdGhpcy5pbml0aWFsaXplKCkNCiAgICAgIGZvciAobGV0IGNhdGVnb3J5IGluIGRhdGEuY2F0ZWdvcmllcykgew0KICAgICAgICB0aGlzLkN1cnJlbnRDYXRlZ29yaWVzLnB1c2goew0KICAgICAgICAgIGtleTogY2F0ZWdvcnksDQogICAgICAgICAgdGV4dDogY2F0ZWdvcnksDQogICAgICAgICAgdmFsdWU6IGRhdGEuY2F0ZWdvcmllc1tjYXRlZ29yeV0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIGZvciAobGV0IHVybCBpbiBkYXRhLmltYWdlcykgew0KICAgICAgICBpZiAoZGF0YS5pbWFnZXNbdXJsXSAhPSBudWxsKSB7DQogICAgICAgICAgaWYgKHRoaXMuSW1nVXJscy5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICAgIHRoaXMuSW1nVXJscy5wdXNoKHsNCiAgICAgICAgICAgICAgaWQ6IGRhdGEuaW1hZ2VzW3VybF0sDQogICAgICAgICAgICAgIHVybDogYC9hcGkvc3RvcmVzLyR7dGhpcy5zdG9yZV9pZH0vaW1hZ2VzLyR7ZGF0YS5pbWFnZXNbdXJsXX1gLA0KICAgICAgICAgICAgICBjbGFzc25hbWU6ICdjYXJvdXNlbC1pdGVtIGFjdGl2ZScNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuSW1nVXJscy5wdXNoKHsNCiAgICAgICAgICAgICAgaWQ6IGRhdGEuaW1hZ2VzW3VybF0sDQogICAgICAgICAgICAgIHVybDogYC9hcGkvc3RvcmVzLyR7dGhpcy5zdG9yZV9pZH0vaW1hZ2VzLyR7ZGF0YS5pbWFnZXNbdXJsXX1gLA0KICAgICAgICAgICAgICBjbGFzc25hbWU6ICdjYXJvdXNlbC1pdGVtJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9KQ0KICAgIHRoaXMuZmV0Y2hDYXRlZ29yeSgpLnRoZW4oKGRhdGEpID0+IHsNCiAgICAgIHRoaXMuQ2F0ZWdvcmllcyA9IGRhdGENCiAgICB9KQ0KICAgIHRoaXMuZmV0Y2hMaW5rKCkudGhlbigoZGF0YSkgPT4gew0KICAgICAgdGhpcy5MaW5rcyA9IGRhdGENCiAgICB9KQ0KICB9DQp9DQo="},{"version":3,"sources":["Store.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Store.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div class=\"container mt-3\">\r\n    <small class=\"text-muted\">{{ $options.__file }}</small>\r\n    <h1 class=\"text-primary font-weight-bold\">\r\n      <router-link to=\"/\"\r\n        ><img\r\n          src=\"~bootstrap-icons/icons/caret-left-fill.svg\"\r\n          alt=\"caret icon\"\r\n          width=\"30\"\r\n          height=\"30\"\r\n      /></router-link>\r\n      Vetrina digitale di: {{ store.company_name }}\r\n    </h1>\r\n    <hr />\r\n    <!-- <div class=\"row alert-danger\">TODO</div> -->\r\n    <div class=\"row m-3\">\r\n      <div class=\"col\">\r\n        <pre>{{ store }}</pre>\r\n\r\n        <!-- display slide images -->\r\n        <div\r\n          id=\"carouselExampleCaptions\"\r\n          class=\"carousel slide\"\r\n        >\r\n          <div class=\"carousel-inner\">\r\n            <div\r\n              :class=\"imgurl.classname\"\r\n              v-for=\"imgurl in ImgUrls\"\r\n              :key=\"imgurl.id\"\r\n            >\r\n              <div class=\"row justify-content-md-center\">\r\n                <div class=\"col col-md-auto\">\r\n                  <img\r\n                    :src=\"imgurl.url\"\r\n                    class=\"rounded mx-auto d-block\"\r\n                    alt=\"Image\"\r\n                    height=\"200\"\r\n                    width=\"200\"\r\n                    @click=\"SelectLogo(imgurl.id)\"\r\n                  />\r\n                </div>\r\n                <div class=\"col col-md-1\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn-close\"\r\n                    aria-label=\"Close\"\r\n                    @click=\"DeleteImage(imgurl.id)\"\r\n                  ></button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <a\r\n            class=\"carousel-control-prev\"\r\n            href=\"#carouselExampleCaptions\"\r\n            role=\"button\"\r\n            data-slide=\"prev\"\r\n          >\r\n            <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n            <span class=\"visually-hidden\">Previous</span>\r\n          </a>\r\n          <a\r\n            class=\"carousel-control-next\"\r\n            href=\"#carouselExampleCaptions\"\r\n            role=\"button\"\r\n            data-slide=\"next\"\r\n          >\r\n            <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n            <span class=\"visually-hidden\">Next</span>\r\n          </a>\r\n        </div>\r\n\r\n        <!-- upload images -->\r\n        <form novalidate>\r\n          <h4>Upload images</h4>\r\n          <div class=\"dropbox\">\r\n            <input\r\n              type=\"file\"\r\n              :name=\"uploadFieldName\"\r\n              :disabled=\"isSaving\"\r\n              @change=\"filesChange($event.target.name, $event.target.files)\"\r\n              accept=\"image/*\"\r\n              class=\"input-file\"\r\n            />\r\n          </div>\r\n        </form>\r\n\r\n        <!-- diaplsy tiptap discription -->\r\n        <div class=\"editor\">\r\n          <label for=\"\" style=\"font-size: 24px\">Description</label>\r\n          <editor-content\r\n            class=\"editor__content\"\r\n            :editor=\"editor\"\r\n            id=\"description\"\r\n            name=\"description\"\r\n            @keyup.enter=\"UpdateCompany($event)\"\r\n          />\r\n          <editor-menu-bar :editor=\"editor\" v-slot=\"{ commands, isActive }\">\r\n            <div class=\"menubar\">\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.bold() }\"\r\n                @click=\"commands.bold\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/bold.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.italic() }\"\r\n                @click=\"commands.italic\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/italic.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.strike() }\"\r\n                @click=\"commands.strike\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/strike.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.underline() }\"\r\n                @click=\"commands.underline\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/underline.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.code() }\"\r\n                @click=\"commands.code\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/code.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.paragraph() }\"\r\n                @click=\"commands.paragraph\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/paragraph.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.heading({ level: 1 }) }\"\r\n                @click=\"commands.heading({ level: 1 })\"\r\n              >\r\n                H1\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.heading({ level: 2 }) }\"\r\n                @click=\"commands.heading({ level: 2 })\"\r\n              >\r\n                H2\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.heading({ level: 3 }) }\"\r\n                @click=\"commands.heading({ level: 3 })\"\r\n              >\r\n                H3\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.bullet_list() }\"\r\n                @click=\"commands.bullet_list\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/ul.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.ordered_list() }\"\r\n                @click=\"commands.ordered_list\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/ol.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.blockquote() }\"\r\n                @click=\"commands.blockquote\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/quote.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button\r\n                class=\"menubar__button\"\r\n                :class=\"{ 'is-active': isActive.code_block() }\"\r\n                @click=\"commands.code_block\"\r\n              >\r\n                <img :src=\"publicPath + 'icons/code.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button class=\"menubar__button\" @click=\"commands.horizontal_rule\">\r\n                <img :src=\"publicPath + 'icons/hr.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button class=\"menubar__button\" @click=\"commands.undo\">\r\n                <img :src=\"publicPath + 'icons/undo.svg'\" alt=\"\" />\r\n              </button>\r\n\r\n              <button class=\"menubar__button\" @click=\"commands.redo\">\r\n                <img :src=\"publicPath + 'icons/redo.svg'\" alt=\"\" />\r\n              </button>\r\n            </div>\r\n          </editor-menu-bar>\r\n          <editor-menu-bubble\r\n            class=\"menububble\"\r\n            :editor=\"editor\"\r\n            @hide=\"hideLinkMenu\"\r\n            v-slot=\"{ commands, isActive, getMarkAttrs, menu }\"\r\n          >\r\n            <div\r\n              class=\"menububble\"\r\n              :class=\"{ 'is-active': menu.isActive }\"\r\n              :style=\"`left: ${menu.left}px; bottom: ${menu.bottom}px;`\"\r\n            >\r\n              <form\r\n                class=\"menububble__form\"\r\n                v-if=\"linkMenuIsActive\"\r\n                @submit.prevent=\"setLinkUrl(commands.link, linkUrl)\"\r\n              >\r\n                <input\r\n                  class=\"menububble__input\"\r\n                  type=\"text\"\r\n                  v-model=\"linkUrl\"\r\n                  placeholder=\"https://\"\r\n                  ref=\"linkInput\"\r\n                  @keydown.esc=\"hideLinkMenu\"\r\n                />\r\n                <button\r\n                  class=\"menububble__button\"\r\n                  @click=\"setLinkUrl(commands.link, null)\"\r\n                  type=\"button\"\r\n                >\r\n                  <img :src=\"publicPath + 'icons/remove.svg'\" alt=\"\" />\r\n                </button>\r\n              </form>\r\n\r\n              <template v-else>\r\n                <button\r\n                  class=\"menububble__button\"\r\n                  @click=\"showLinkMenu(getMarkAttrs('link'))\"\r\n                  :class=\"{ 'is-active': isActive.link() }\"\r\n                >\r\n                  <span>{{\r\n                    isActive.link() ? \"Update Link\" : \"Add Link\"\r\n                  }}</span>\r\n                  <img :src=\"publicPath + 'icons/link.svg'\" alt=\"\" />\r\n                </button>\r\n              </template>\r\n            </div>\r\n          </editor-menu-bubble>\r\n        </div>\r\n        <br />\r\n        <!-- diaplsy company name -->\r\n        <div class=\"input-group mb-3\">\r\n          <span class=\"input-group-text\" id=\"companyname\">Company Name</span>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            name=\"company_name\"\r\n            :value=\"store.company_name\"\r\n            @blur=\"UpdateCompany($event)\"\r\n            aria-label=\"Sizing example input\"\r\n            aria-describedby=\"companyname\"\r\n          />\r\n        </div>\r\n        <br />\r\n\r\n        <!-- diaplsy address and city name -->\r\n        <div class=\"input-group mb-3\">\r\n          <span class=\"input-group-text\" id=\"address\">Address</span>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            name=\"address\"\r\n            :value=\"store.address\"\r\n            @blur=\"UpdateCompany($event)\"\r\n            aria-label=\"Sizing example input\"\r\n            aria-describedby=\"address\"\r\n          />\r\n          <span class=\"input-group-text\" id=\"city\">City</span>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            name=\"city\"\r\n            :value=\"store.city\"\r\n            @blur=\"UpdateCompany($event)\"\r\n            aria-label=\"Sizing example input\"\r\n            aria-describedby=\"city\"\r\n          />\r\n        </div>\r\n        <br />\r\n\r\n        <!-- diaplsy zip, vat and fiscal_code name -->\r\n        <div class=\"input-group mb-3\">\r\n          <span class=\"input-group-text\" id=\"zip\">Zip</span>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            name=\"zip\"\r\n            :value=\"store.zip\"\r\n            @blur=\"UpdateCompany($event)\"\r\n            aria-label=\"Sizing example input\"\r\n            aria-describedby=\"zip\"\r\n          />\r\n          <span class=\"input-group-text\" id=\"vat\">Vat</span>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            name=\"vat_id\"\r\n            :value=\"store.vat_id\"\r\n            @blur=\"UpdateCompany($event)\"\r\n            aria-label=\"Sizing example input\"\r\n            aria-describedby=\"vat\"\r\n          />\r\n          <span class=\"input-group-text\" id=\"fiscal_code\">Fiscal Code</span>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            name=\"fiscal_code\"\r\n            :value=\"store.fiscal_code\"\r\n            @blur=\"UpdateCompany($event)\"\r\n            aria-label=\"Sizing example input\"\r\n            aria-describedby=\"fiscal_code\"\r\n          />\r\n        </div>\r\n        <br />\r\n\r\n        <!-- diaplsy opening hours -->\r\n        <div class=\"input-group mb-3\">\r\n          <select class=\"form-select\" id=\"week\" v-model.lazy=\"openweek\">\r\n            <option value=\"selected\">Opening Hours</option>\r\n            <option value=\"0\">Monday</option>\r\n            <option value=\"1\">Tuesday</option>\r\n            <option value=\"2\">Wednesday</option>\r\n            <option value=\"3\">Thursday</option>\r\n            <option value=\"4\">Friday</option>\r\n            <option value=\"5\">Saturday</option>\r\n            <option value=\"6\">Sunday</option>\r\n          </select>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"OpeningHours\"\r\n            :value=\"OpeningHours[0]\"\r\n            @blur=\"UpdateOpening(0, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"!OpeningHours\"\r\n            @blur=\"UpdateOpening(0, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"OpeningHours\"\r\n            :value=\"OpeningHours[1]\"\r\n            @blur=\"UpdateOpening(1, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"!OpeningHours\"\r\n            @blur=\"UpdateOpening(1, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"OpeningHours\"\r\n            :value=\"OpeningHours[2]\"\r\n            @blur=\"UpdateOpening(2, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"!OpeningHours\"\r\n            @blur=\"UpdateOpening(2, $event)\"\r\n          />\r\n        </div>\r\n        <br />\r\n\r\n        <!-- diaplsy live streaming opening hours -->\r\n        <div class=\"input-group mb-3\">\r\n          <select class=\"form-select\" id=\"live\" v-model.lazy=\"liveweek\">\r\n            <option value=\"selected\">Live Streaming</option>\r\n            <option value=\"0\">Monday</option>\r\n            <option value=\"1\">Tuesday</option>\r\n            <option value=\"2\">Wednesday</option>\r\n            <option value=\"3\">Thursday</option>\r\n            <option value=\"4\">Friday</option>\r\n            <option value=\"5\">Saturday</option>\r\n            <option value=\"6\">Sunday</option>\r\n          </select>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"LiveStreaming\"\r\n            :value=\"LiveStreaming[0]\"\r\n            @blur=\"UpdateLiving(0, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"!LiveStreaming\"\r\n            @blur=\"UpdateLiving(0, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"LiveStreaming\"\r\n            :value=\"LiveStreaming[1]\"\r\n            @blur=\"UpdateLiving(1, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"!LiveStreaming\"\r\n            @blur=\"UpdateLiving(1, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"LiveStreaming\"\r\n            :value=\"LiveStreaming[2]\"\r\n            @blur=\"UpdateLiving(2, $event)\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            v-if=\"!LiveStreaming\"\r\n            @blur=\"UpdateLiving(2, $event)\"\r\n          />\r\n        </div>\r\n        <br />\r\n\r\n        <!-- diaplsy categories -->\r\n        <div class=\"row\">\r\n          <div class=\"col-12 col-md-8 col-sm-8\">\r\n            <div class=\"input-group mb-3\">\r\n              <label class=\"input-group-text\" for=\"CurrentCategories\"\r\n                >Categories</label\r\n              >\r\n              <select\r\n                class=\"form-select\"\r\n                id=\"CurrentCategories\"\r\n                v-model=\"currentcategory\"\r\n                v-on:change=\"onCategoryChange(currentcategory)\"\r\n              >\r\n                <option\r\n                  v-for=\"option in CurrentCategories\"\r\n                  :key=\"option.key\"\r\n                  :value=\"option.value\"\r\n                >\r\n                  {{ option.text }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"input-group mb-3\">\r\n                <label class=\"input-group-text\" for=\"AddCategories\">Add</label>\r\n                <select\r\n                  class=\"form-select\"\r\n                  id=\"AddCategories\"\r\n                  v-model.lazy=\"addcategory\"\r\n                >\r\n                  <option\r\n                    v-for=\"option in Categories\"\r\n                    :key=\"option.id\"\r\n                    :value=\"option.id\"\r\n                  >\r\n                    {{ option.display }}\r\n                  </option>\r\n                </select>\r\n                <label class=\"input-group-text\" for=\"MainCategories\"\r\n                  >Main</label\r\n                >\r\n                <select\r\n                  class=\"form-select\"\r\n                  id=\"MainCategories\"\r\n                  v-model.lazy=\"maincategory\"\r\n                >\r\n                  <option\r\n                    v-for=\"option in CurrentCategories\"\r\n                    :key=\"option.key\"\r\n                    :value=\"option.value\"\r\n                  >\r\n                    {{ option.text }}\r\n                  </option>\r\n                </select>\r\n                <label class=\"input-group-text\" for=\"DeleteCategories\"\r\n                  >Delete</label\r\n                >\r\n                <select\r\n                  class=\"form-select\"\r\n                  id=\"DeleteCategories\"\r\n                  v-model.lazy=\"deletecategory\"\r\n                >\r\n                  <option\r\n                    v-for=\"option in CurrentCategories\"\r\n                    :key=\"option.key\"\r\n                    :value=\"option.value\"\r\n                  >\r\n                    {{ option.text }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 col-md-4 col-sm-4\">\r\n            <img\r\n              :src=\"categoryimg\"\r\n              :alt=\"currentcategory\"\r\n              v-if=\"categoryimg\"\r\n              width=\"100\"\r\n              height=\"100\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <br />\r\n\r\n        <!-- diaplsy links -->\r\n        <div class=\"col\">\r\n          <label for=\"link\" style=\"font-size: 24px\">Link</label>\r\n          <table class=\"table table-hover\" id=\"link\">\r\n            <tbody>\r\n              <tr v-for=\"link in CurrentLinks\" :key=\"link.id\">\r\n                <td>\r\n                  <img :src=\"link.image\" alt=\"image\" with=\"20\" height=\"20\" />\r\n                </td>\r\n                <th>{{ link.display }}</th>\r\n                <td>{{ link.url }}</td>\r\n                <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-dark\"\r\n                    v-on:click=\"DeleteLink(link.id)\"\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <br />\r\n        <div class=\"input-group mb-3\">\r\n          <label class=\"input-group-text\" for=\"addlink\">Add Link</label>\r\n          <select class=\"form-select\" id=\"addlink\" v-model.lazy=\"addlink\">\r\n            <option v-for=\"link in Links\" :key=\"link.id\" :value=\"link.id\">\r\n              {{ link.display }}\r\n            </option>\r\n          </select>\r\n          <input type=\"text\" class=\"form-control\" v-model.lazy=\"addlinkurl\" />\r\n        </div>\r\n        <br /><br />\r\n\r\n        <!-- diaplsy geolocation -->\r\n        <div class=\"w-100\">\r\n          <div\r\n            v-show=\"this.show_map\"\r\n            id=\"map\"\r\n            style=\"width: 100%; height: 200px\"\r\n            class=\"mb-5\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport { Editor, EditorContent, EditorMenuBar, EditorMenuBubble } from 'tiptap'\r\nimport {\r\n  Blockquote,\r\n  BulletList,\r\n  CodeBlock,\r\n  HardBreak,\r\n  Heading,\r\n  HorizontalRule,\r\n  ListItem,\r\n  OrderedList,\r\n  TodoItem,\r\n  TodoList,\r\n  Bold,\r\n  Code,\r\n  Italic,\r\n  Link,\r\n  Strike,\r\n  Underline,\r\n  History\r\n} from 'tiptap-extensions'\r\nimport 'leaflet/dist/leaflet.css'\r\nimport '../../public/menubar.scss'\r\nimport '../../public/menububble.scss'\r\nimport L from 'leaflet'\r\nVue.use(axios)\r\nconst STATUS_INITIAL = 0\r\nconst STATUS_SAVING = 1\r\nconst STATUS_SUCCESS = 2\r\nconst STATUS_FAILED = 3\r\nexport default {\r\n  components: {\r\n    EditorContent,\r\n    EditorMenuBar,\r\n    EditorMenuBubble\r\n  },\r\n  data () {\r\n    return {\r\n      store_id: null,\r\n      store: {},\r\n      editor: new Editor({\r\n        onBlur: ({ event }) => {\r\n          this.UpdateCompany(event)\r\n        },\r\n        extensions: [\r\n          new Blockquote(),\r\n          new BulletList(),\r\n          new CodeBlock(),\r\n          new HardBreak(),\r\n          new Heading({ levels: [1, 2, 3] }),\r\n          new HorizontalRule(),\r\n          new ListItem(),\r\n          new OrderedList(),\r\n          new TodoItem(),\r\n          new TodoList(),\r\n          new Link(),\r\n          new Bold(),\r\n          new Code(),\r\n          new Italic(),\r\n          new Strike(),\r\n          new Underline(),\r\n          new History()\r\n        ],\r\n        content: ''\r\n      }),\r\n      CurrentCategories: [],\r\n      Categories: [],\r\n      currentcategory: '',\r\n      addcategory: '',\r\n      maincategory: '',\r\n      deletecategory: '',\r\n      categoryimg: '',\r\n      ImgUrls: [],\r\n      deleteimg: '',\r\n      company_name: String,\r\n      latitude: Number,\r\n      longitude: Number,\r\n      publicPath: process.env.BASE_URL,\r\n      show_map: false,\r\n      CurrentLinks: [],\r\n      Links: [],\r\n      addlink: '',\r\n      addlinkurl: '',\r\n      uploadedFiles: [],\r\n      uploadError: null,\r\n      currentStatus: null,\r\n      uploadFieldName: 'contents',\r\n      openweek: 'selected',\r\n      liveweek: 'selected',\r\n      OpeningHours: [],\r\n      CurrentOpeningHours: {},\r\n      CurrentLiveStreaming: {},\r\n      LiveStreaming: [],\r\n      linkUrl: null,\r\n      linkMenuIsActive: false\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    this.editor.destroy()\r\n  },\r\n  watch: {\r\n    openweek: function () {\r\n      this.OpeningHours = this.CurrentOpeningHours[this.openweek]\r\n    },\r\n    liveweek: function () {\r\n      this.LiveStreaming = this.CurrentLiveStreaming[this.liveweek]\r\n    },\r\n    addcategory: function () {\r\n      if (this.CurrentCategories.length === 0) {\r\n        this.MainCategory()\r\n      }\r\n      this.AddCategory().then((data) => {\r\n        if (data === 'ok') {\r\n          this.Categories.forEach((category) => {\r\n            if (category.id === this.addcategory) {\r\n              alert('Aggiunti i ' + category.display + ' con successo!')\r\n              this.CurrentCategories.push({\r\n                key: category.id,\r\n                value: category.id,\r\n                text: category.display\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    maincategory: function () {\r\n      this.MainCategory().then((data) => {\r\n        if (data === 'ok') {\r\n          this.Categories.forEach((category) => {\r\n            if (category.id === this.maincategory) {\r\n              alert(\r\n                'Selezionato con successo i ' +\r\n                  category.display +\r\n                  ' come categoria principale!'\r\n              )\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    deletecategory: function () {\r\n      if (confirm('Vuoi rimuovere questa categoria?')) {\r\n        this.DeleteCategory().then((data) => {\r\n          if (data.status === 200) {\r\n            this.Categories.forEach((category) => {\r\n              if (category.id === this.deletecategory) {\r\n                alert('Eliminato con successo i ' + category.display + '!')\r\n                for (let i in this.CurrentCategories) {\r\n                  if (this.CurrentCategories[i].value === this.deletecategory) {\r\n                    this.CurrentCategories.splice(i, 1)\r\n                  }\r\n                }\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    addlinkurl: function () {\r\n      let flag = true\r\n      this.CurrentLinks.forEach((link) => {\r\n        if (this.addlink === link.link_id) {\r\n          flag = false\r\n          alert('Il ' + link.display + ' esiste già!')\r\n        }\r\n      })\r\n      if (flag) {\r\n        this.AddLink().then((data) => {\r\n          if (data) {\r\n            this.Links.forEach((link) => {\r\n              if (this.addlink === link.id) {\r\n                this.CurrentLinks.push({\r\n                  id: data.id,\r\n                  link_id: link.id,\r\n                  display: link.display,\r\n                  image: link.image,\r\n                  url: this.addlinkurl\r\n                })\r\n                alert('Aggiunto con successo il ' + link.display + '!')\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    isInitial () {\r\n      return this.currentStatus === STATUS_INITIAL\r\n    },\r\n    isSaving () {\r\n      return this.currentStatus === STATUS_SAVING\r\n    },\r\n    isSuccess () {\r\n      return this.currentStatus === STATUS_SUCCESS\r\n    },\r\n    isFailed () {\r\n      return this.currentStatus === STATUS_FAILED\r\n    }\r\n  },\r\n  methods: {\r\n    reset () {\r\n      // reset form to initial state\r\n      this.currentStatus = STATUS_INITIAL\r\n      this.uploadedFiles = []\r\n      this.uploadError = null\r\n    },\r\n    save (formData) {\r\n      // upload data to the server\r\n      this.currentStatus = STATUS_SAVING\r\n\r\n      this.upload(formData)\r\n        .then((x) => {\r\n          this.uploadedFiles = [].concat(x)\r\n          this.currentStatus = STATUS_SUCCESS\r\n        })\r\n        .catch((err) => {\r\n          this.uploadError = err.response\r\n          this.currentStatus = STATUS_FAILED\r\n        })\r\n    },\r\n    filesChange (fieldName, fileList) {\r\n      // handle file changes\r\n      const formData = new FormData()\r\n      if (!fileList.length) return\r\n      formData.append(fieldName, fileList[0], fileList[0].name)\r\n      // save it\r\n      this.save(formData)\r\n    },\r\n    upload (formData) {\r\n      return fetch(`/api/stores/${this.store_id}/images`, {\r\n        method: 'POST',\r\n        body: formData,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          accept: 'application/json'\r\n        }\r\n      })\r\n        .then((x) => x.json())\r\n        .then((x) => {\r\n          this.saveimage(x.id, formData)\r\n        })\r\n    },\r\n    saveimage (id, formData) {\r\n      return fetch(`/api/stores/${this.store_id}/images/${id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          accept: 'application/json',\r\n          mimetype: formData.getAll('contents')[0].type\r\n        },\r\n        body: formData\r\n      })\r\n        .then((res) => res.json())\r\n        .then((res) => {\r\n          if (res.status === 200) {\r\n            if (this.ImgUrls.length === 0) {\r\n              this.ImgUrls.push({\r\n                id: res.id,\r\n                url: `/api/stores/${this.store_id}/images/${res.id}`,\r\n                classname: 'carousel-item active'\r\n              })\r\n              alert('Aggiunto con successo!')\r\n            } else {\r\n              this.ImgUrls.push({\r\n                id: res.id,\r\n                url: `/api/stores/${this.store_id}/images/${res.id}`,\r\n                classname: 'carousel-item'\r\n              })\r\n              alert('Aggiunto con successo!')\r\n            }\r\n          }\r\n        })\r\n    },\r\n    async DeleteImage (id) {\r\n      const response = await fetch(\r\n        `/api/stores/${this.store_id}/images/${id}`,\r\n        {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            accept: 'application/json'\r\n          }\r\n        }\r\n      )\r\n      if (response.status === 200) {\r\n        for(let i in this.ImgUrls){\r\n          if(this.ImgUrls[i].id == id){\r\n            this.ImgUrls.splice(i,1)\r\n            if(this.ImgUrls.length!==0)\r\n              if(i==this.ImgUrls.length)\r\n                this.ImgUrls[0].classname = 'carousel-item active'\r\n              else this.ImgUrls[i].classname = 'carousel-item active'\r\n          }\r\n        }\r\n        alert('Eliminato con successo!')\r\n      }\r\n      return response\r\n    },\r\n    async SelectLogo (logoid) {\r\n      if (confirm('Vuoi scegliere questa immagine come immagine del tuo logo?')) {\r\n        const response = await fetch(`/api/stores/${this.store_id}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({'logo_id': logoid})\r\n        })\r\n        if(response.status === 200){\r\n          alert('Eliminato con successo!')\r\n        }\r\n        return response\r\n      }\r\n    },\r\n    async UpdateCompany (event) {\r\n      let data = {}\r\n      console.log(event)\r\n      if (event.target.className === 'ProseMirror ProseMirror-focused') {\r\n        data = { description: event.target.innerHTML }\r\n      } else {\r\n        switch (event.target.name) {\r\n          case 'company_name':\r\n            data = { company_name: event.target.value }\r\n            break\r\n          case 'address':\r\n            data = { address: event.target.value }\r\n            break\r\n          case 'city':\r\n            data = { city: event.target.value }\r\n            break\r\n          case 'zip':\r\n            data = { zip: event.target.value }\r\n            break\r\n          case 'vat_id':\r\n            data = { vat_id: event.target.value }\r\n            break\r\n          case 'fiscal_code':\r\n            data = { fiscal_code: event.target.value }\r\n            break\r\n          default:\r\n            break\r\n        }\r\n      }\r\n      fetch(`/api/stores/${this.store_id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n      }).then((response) => {\r\n        if (response.status === 200) {\r\n          alert('Aggiornato con successo!')\r\n        }\r\n      })\r\n    },\r\n    async UpdateOpening (i, event) {\r\n      if (event.target.value === '') {\r\n        this.CurrentOpeningHours[this.openweek].splice(i, 1)\r\n      } else {\r\n        if (!this.CurrentOpeningHours[this.openweek]) {\r\n          this.CurrentOpeningHours[this.openweek] = []\r\n        }\r\n        if (this.CurrentOpeningHours[this.openweek].length === i) {\r\n          this.CurrentOpeningHours[this.openweek][i] = []\r\n        }\r\n        this.CurrentOpeningHours[this.openweek][i][0] = event.target.value.split(',')[0]\r\n        this.CurrentOpeningHours[this.openweek][i][1] = event.target.value.split(',')[1]\r\n      }\r\n      let data = {\r\n        opening_hours: JSON.stringify(this.CurrentOpeningHours)\r\n      }\r\n      fetch(`/api/stores/${this.store_id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n      }).then((response) => {\r\n        if (response.status === 200) {\r\n          alert('Aggiornato con successo!')\r\n        }\r\n      })\r\n    },\r\n    async UpdateLiving (i, event) {\r\n      if (event.target.value === '') {\r\n        this.CurrentLiveStreaming[this.liveweek].splice(i, 1)\r\n      } else {\r\n        if (!this.CurrentLiveStreaming[this.liveweek]) {\r\n          this.CurrentLiveStreaming[this.liveweek] = []\r\n        }\r\n        if (this.CurrentLiveStreaming[this.liveweek].length === i) {\r\n          this.CurrentLiveStreaming[this.liveweek][i] = []\r\n        }\r\n        this.CurrentLiveStreaming[this.liveweek][i][0] = event.target.value.split(',')[0]\r\n        this.CurrentLiveStreaming[this.liveweek][i][1] = event.target.value.split(',')[1]\r\n      }\r\n      let data = {\r\n        live_streaming_opening_hours: JSON.stringify(this.CurrentLiveStreaming)\r\n      }\r\n      fetch(`/api/stores/${this.store_id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(data)\r\n      }).then((response) => {\r\n        if (response.status === 200) {\r\n          alert('Aggiornato con successo!')\r\n        }\r\n      })\r\n    },\r\n    initialize: function () {\r\n      if (this.latitude && this.longitude) {\r\n        this.show_map = true\r\n        Vue.nextTick(() => {\r\n          // update map\r\n          const myIcon = L.icon({\r\n            iconUrl: this.publicPath + 'icons/favicon.png',\r\n            iconSize: [32, 32],\r\n            shadowSize: [38, 38], // size of the shadow\r\n            iconAnchor: [22, 94],\r\n            shadowAnchor: [4, 62],\r\n            popupAnchor: [-3, -90]\r\n          })\r\n          var map = L.map('map', {\r\n            dragging: !L.Browser.mobile,\r\n            tap: !L.Browser.mobile\r\n          }).setView([this.latitude, this.longitude], 17)\r\n          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution:\r\n              '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          }).addTo(map)\r\n          L.marker([this.latitude, this.longitude], { icon: myIcon })\r\n            .addTo(map)\r\n            .bindPopup(this.company_name)\r\n            .openPopup()\r\n        })\r\n      }\r\n    },\r\n    async fetchStore (storeId) {\r\n      const response = await fetch('/api/stores/' + storeId, {\r\n        mode: 'no-cors',\r\n        headers: {\r\n          accept: 'application/json'\r\n        }\r\n      })\r\n      return response.json()\r\n    },\r\n    async fetchCategory () {\r\n      const response = await fetch('/api/categories', {\r\n        mode: 'no-cors',\r\n        headers: {\r\n          accept: 'application/json'\r\n        }\r\n      })\r\n      return response.json()\r\n    },\r\n    async fetchLink () {\r\n      const response = await fetch('/api/links', {\r\n        mode: 'no-cors',\r\n        headers: {\r\n          accept: 'application/json'\r\n        }\r\n      })\r\n      return response.json()\r\n    },\r\n    async AddCategory () {\r\n      const response = await fetch(\r\n        `/api/stores/${this.store_id}/categories/${this.addcategory}`,\r\n        {\r\n          method: 'POST',\r\n          mode: 'no-cors',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      )\r\n      return response.text()\r\n    },\r\n    async MainCategory () {\r\n      const response = await fetch(\r\n        `/api/stores/${this.store_id}/categories/${this.maincategory}/main`,\r\n        {\r\n          method: 'POST',\r\n          mode: 'no-cors',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      )\r\n      return response.text()\r\n    },\r\n    async DeleteCategory () {\r\n      const response = await fetch(\r\n        `/api/stores/${this.store_id}/categories/${this.deletecategory}`,\r\n        {\r\n          method: 'POST',\r\n          mode: 'no-cors',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      )\r\n      return response\r\n    },\r\n    async AddLink () {\r\n      const response = await fetch(\r\n        `/api/stores/${this.store_id}/links/${this.addlink}`,\r\n        {\r\n          method: 'POST',\r\n          headers: {\r\n            'content-type': 'application/json',\r\n            accept: 'application/json'\r\n          },\r\n          body: JSON.stringify({ url: this.addlinkurl })\r\n        }\r\n      )\r\n      return response.json()\r\n    },\r\n    async DeleteLink (id) {\r\n      if (confirm('Vuoi rimuovere questa categoria?')) {\r\n        for (let i in this.CurrentLinks) {\r\n          if (this.CurrentLinks[i].id === id) {\r\n            this.CurrentLinks.splice(i, 1)\r\n          }\r\n        }\r\n        const response = await fetch(\r\n          `/api/stores/${this.store_id}/links/${id}`,\r\n          {\r\n            method: 'POST',\r\n            mode: 'no-cors',\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            }\r\n          }\r\n        )\r\n        if (response.status === 200) {\r\n          alert('Eliminato con successo!')\r\n        }\r\n        return response\r\n      }\r\n    },\r\n    onCategoryChange (currentcategory) {\r\n      this.Categories.forEach((category) => {\r\n        if (category.id === currentcategory) {\r\n          this.categoryimg = category.image\r\n        }\r\n      })\r\n    },\r\n    showLinkMenu (attrs) {\r\n      this.linkUrl = attrs.href\r\n      this.linkMenuIsActive = true\r\n      this.$nextTick(() => {\r\n        this.$refs.linkInput.focus()\r\n      })\r\n    },\r\n    hideLinkMenu () {\r\n      this.linkUrl = null\r\n      this.linkMenuIsActive = false\r\n    },\r\n    setLinkUrl (command, url) {\r\n      command({ href: url })\r\n      this.hideLinkMenu()\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.reset()\r\n    this.store_id = this.$route.params.id\r\n    this.fetchStore(this.store_id).then((data) => {\r\n      this.store = data\r\n      this.editor.setContent(data.description)\r\n      this.latitude = data.latitude\r\n      this.longitude = data.longitude\r\n      this.company_name = data.company_name\r\n      this.CurrentLinks = data.links\r\n      if (data.opening_hours != null) {\r\n        this.CurrentOpeningHours = data.opening_hours\r\n      }\r\n      if (data.live_streaming_opening_hours != null) {\r\n        this.CurrentLiveStreaming = data.live_streaming_opening_hours\r\n      }\r\n      this.initialize()\r\n      for (let category in data.categories) {\r\n        this.CurrentCategories.push({\r\n          key: category,\r\n          text: category,\r\n          value: data.categories[category]\r\n        })\r\n      }\r\n      for (let url in data.images) {\r\n        if (data.images[url] != null) {\r\n          if (this.ImgUrls.length === 0) {\r\n            this.ImgUrls.push({\r\n              id: data.images[url],\r\n              url: `/api/stores/${this.store_id}/images/${data.images[url]}`,\r\n              classname: 'carousel-item active'\r\n            })\r\n          } else {\r\n            this.ImgUrls.push({\r\n              id: data.images[url],\r\n              url: `/api/stores/${this.store_id}/images/${data.images[url]}`,\r\n              classname: 'carousel-item'\r\n            })\r\n          }\r\n        }\r\n      }\r\n    })\r\n    this.fetchCategory().then((data) => {\r\n      this.Categories = data\r\n    })\r\n    this.fetchLink().then((data) => {\r\n      this.Links = data\r\n    })\r\n  }\r\n}\r\n</script>\r\n"]}]}
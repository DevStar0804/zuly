{"remainingRequest":"D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\working\\Vue\\zuly\\src\\pages\\SetPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\working\\Vue\\zuly\\src\\pages\\SetPassword.vue","mtime":1603842703512},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1601629561006},{"path":"D:\\working\\Vue\\zuly\\node_modules\\babel-loader\\lib\\index.js","mtime":1599704251701},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1601629561006},{"path":"D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js","mtime":1601629564332}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICB0b2tlbjogJycsDQogICAgICBwYXNzd29yZDogJycsDQogICAgICBwYXNzd29yZDE6ICcnLA0KICAgICAgZXJyb3JNZXNzYWdlOiAnJywNCiAgICAgIHN1Y2Nlc3M6IGZhbHNlDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGNoZWNrUGFzc3dvcmQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLnBhc3N3b3JkICYmIHRoaXMucGFzc3dvcmQgIT09IHRoaXMucGFzc3dvcmQxKSB7DQogICAgICAgIHJldHVybiAnTGUgcGFzc3dvcmQgbm9uIGNvbWJhY2lhbm8uJw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7DQogICAgdGhpcy50b2tlbiA9IHRoaXMuJHJvdXRlLnBhcmFtcy50b2tlbg0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgcHV0UmVxdWVzdCAoKSB7DQogICAgICBsZXQgcGF5bG9hZCA9IHsNCiAgICAgICAgdG9rZW46IHRoaXMudG9rZW4sDQogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkDQogICAgICB9DQogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Bhc3N3ZCcsIHsNCiAgICAgICAgbWV0aG9kOiAnUFVUJywNCiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sDQogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpDQogICAgICB9DQogICAgICApDQogICAgICByZXR1cm4gcmVzcG9uc2UNCiAgICB9LA0KICAgIHNldFBhc3N3b3JkOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLnB1dFJlcXVlc3QoKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7DQogICAgICAgICAgdGhpcy5zdWNjZXNzID0gdHJ1ZQ0KICAgICAgICAgIHRoaXMuJHBhcmVudC5yZXF1ZXN0ZWRSb3V0ZSA9ICcnDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7DQogICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICdOb24gcHVvaSBjYW1iaWFyZSBsYSBwYXNzd29yZC4gRm9yc2UgaWwgbGluayDDqCBzY2FkdXRvPycNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnQ1wnw6ggc3RhdG8gdW4gcHJvYmxlbWEuIFJpcHJvdmEgcGnDuSB0YXJkaS4nDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["SetPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SetPassword.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n  <div class=\"container mt-3\">\r\n    <small class=\"text-muted\">{{ $options.__file }}</small>\r\n    <div class=\"row m-3\">\r\n      <div class=\"col-md-4 offset-md-4\">\r\n        <h1 class=\"text-center\">Imposta la tua password su Zuly</h1>\r\n        <h3 class=\"text-center text-muted\">(riservato ai negozi)</h3>\r\n        <form>\r\n          <p>Imposta la nuova password.</p>\r\n          <div class=\"mb-3\">\r\n            <label for=\"inputPassword\" class=\"form-label\">Password</label>\r\n            <input type=\"password\" class=\"form-control\" id=\"inputPassword\" v-model=\"password\">\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"inputPassword\" class=\"form-label\">Conferma la password</label>\r\n            <input type=\"password\" class=\"form-control\" id=\"inputPassword\" v-model=\"password1\">\r\n          </div>\r\n          <div class=\"alert-danger my-3\" v-show=\"checkPassword || errorMessage\">{{ checkPassword }}{{ errorMessage }}</div>\r\n          <div v-show=\"success\" class=\"text-muted my-3\">\r\n            <p>Il cambio della password del tuo account Zuly è andato a buon fine e abbiamo mandato un'email di conferma all'indirizzo indicato.</p>\r\n            <p>Adesso puoi <router-link to=\"/login\">effettuare il login</router-link>.</p>\r\n          </div>\r\n          <button :disabled=\"success\" type=\"button\" class=\"btn btn-primary\" v-on:click=\"setPassword()\">Imposta</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      token: '',\r\n      password: '',\r\n      password1: '',\r\n      errorMessage: '',\r\n      success: false\r\n    }\r\n  },\r\n  computed: {\r\n    checkPassword: function () {\r\n      if (this.password && this.password !== this.password1) {\r\n        return 'Le password non combaciano.'\r\n      } else {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.token = this.$route.params.token\r\n  },\r\n  methods: {\r\n    async putRequest () {\r\n      let payload = {\r\n        token: this.token,\r\n        password: this.password\r\n      }\r\n      const response = await fetch('/api/passwd', {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      }\r\n      )\r\n      return response\r\n    },\r\n    setPassword: function () {\r\n      this.putRequest().then(response => {\r\n        if (response.ok) {\r\n          this.success = true\r\n          this.$parent.requestedRoute = ''\r\n        } else {\r\n          if (response.status === 401) {\r\n            this.errorMessage = 'Non puoi cambiare la password. Forse il link è scaduto?'\r\n          } else {\r\n            this.errorMessage = 'C\\'è stato un problema. Riprova più tardi.'\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\n"]}]}
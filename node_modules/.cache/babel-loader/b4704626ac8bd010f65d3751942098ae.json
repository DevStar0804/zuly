{"remainingRequest":"D:\\working\\Vue\\zuly\\node_modules\\babel-loader\\lib\\index.js!D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\working\\Vue\\zuly\\src\\pages\\Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\working\\Vue\\zuly\\src\\pages\\Live.vue","mtime":1603565908718},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1601629561006},{"path":"D:\\working\\Vue\\zuly\\node_modules\\babel-loader\\lib\\index.js","mtime":1599704251701},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1601629561006},{"path":"D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js","mtime":1601629564332}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICd3ZWJydGMtYWRhcHRlcic7CmltcG9ydCBpbyBmcm9tICdzb2NrZXQuaW8tY2xpZW50JzsKdmFyIHBjQ29uZmlnID0gewogICdpY2VTZXJ2ZXJzJzogW3sKICAgICd1cmxzJzogJ3N0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDInCiAgfSwgewogICAgJ3VybHMnOiAndHVybjp6dWx5Lml0OjM0NzgnLAogICAgJ2NyZWRlbnRpYWwnOiAndGVzdDEnLAogICAgJ3VzZXJuYW1lJzogJ3Rlc3QxJwogIH1dCn07CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHVibGljUGF0aDogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgICAgIHN0b3JlX2lkOiBudWxsLAogICAgICBzZXNzaW9uOiAnJywKICAgICAgbmFtZTogJ1Bhb2xvIEdyZXBwaScsCiAgICAgIGlzQ2hhbm5lbFJlYWR5OiBmYWxzZSwKICAgICAgaXNJbml0aWF0b3I6IGZhbHNlLAogICAgICBpc1N0YXJ0ZWQ6IGZhbHNlLAogICAgICBsb2NhbFN0cmVhbTogbnVsbCwKICAgICAgcGM6IG51bGwsCiAgICAgIHNvY2tldDogbnVsbAogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgY29uc29sZS5sb2coJ0NsaWVudCBzZW5kaW5nIG1lc3NhZ2U6ICcsIG1lc3NhZ2UpOwogICAgICB0aGlzLnNvY2tldC5lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7CiAgICB9LAogICAgZ290U3RyZWFtOiBmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgIGNvbnNvbGUubG9nKCdBZGRpbmcgbG9jYWwgc3RyZWFtLicpOwogICAgICB0aGlzLmxvY2FsU3RyZWFtID0gc3RyZWFtOwogICAgICB2YXIgbG9jYWxWaWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2NhbFZpZGVvJyk7CiAgICAgIGxvY2FsVmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtOwogICAgICB0aGlzLnNlbmRNZXNzYWdlKCdnb3QgdXNlciBtZWRpYScpOwoKICAgICAgaWYgKHRoaXMuaXNJbml0aWF0b3IpIHsKICAgICAgICB0aGlzLm1heWJlU3RhcnQoKTsKICAgICAgfQogICAgfSwKICAgIG1heWJlU3RhcnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coJz4+Pj4+Pj4gbWF5YmVTdGFydCgpICcsIHRoaXMuaXNTdGFydGVkLCB0aGlzLmxvY2FsU3RyZWFtLCB0aGlzLmlzQ2hhbm5lbFJlYWR5KTsKCiAgICAgIGlmICghdGhpcy5pc1N0YXJ0ZWQgJiYgdHlwZW9mIHRoaXMubG9jYWxTdHJlYW0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMuaXNDaGFubmVsUmVhZHkpIHsKICAgICAgICBjb25zb2xlLmxvZygnPj4+Pj4+IGNyZWF0aW5nIHBlZXIgY29ubmVjdGlvbicpOwogICAgICAgIHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb24oKTsKICAgICAgICB0aGlzLnBjLmFkZFN0cmVhbSh0aGlzLmxvY2FsU3RyZWFtKTsKICAgICAgICB0aGlzLmlzU3RhcnRlZCA9IHRydWU7CiAgICAgICAgY29uc29sZS5sb2coJ2lzSW5pdGlhdG9yJywgdGhpcy5pc0luaXRpYXRvcik7CgogICAgICAgIGlmICh0aGlzLmlzSW5pdGlhdG9yKSB7CiAgICAgICAgICB0aGlzLmRvQ2FsbCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNyZWF0ZVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5wYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZyk7CiAgICAgICAgdGhpcy5wYy5vbmljZWNhbmRpZGF0ZSA9IHRoaXMuaGFuZGxlSWNlQ2FuZGlkYXRlOwogICAgICAgIHRoaXMucGMub25yZW1vdmVzdHJlYW0gPSB0aGlzLmhhbmRsZVJlbW90ZVN0cmVhbVJlbW92ZWQ7CiAgICAgICAgY29uc29sZS5sb2coJ0NyZWF0ZWQgUlRDUGVlckNvbm5uZWN0aW9uJyk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0ZSBQZWVyQ29ubmVjdGlvbiwgZXhjZXB0aW9uOiAnICsgZS5tZXNzYWdlKTsKICAgICAgICBhbGVydCgnQ2Fubm90IGNyZWF0ZSBSVENQZWVyQ29ubmVjdGlvbiBvYmplY3QuJyk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVJY2VDYW5kaWRhdGU6IGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zb2xlLmxvZygnaWNlY2FuZGlkYXRlIGV2ZW50OiAnLCBldmVudCk7CgogICAgICBpZiAoZXZlbnQuY2FuZGlkYXRlKSB7CiAgICAgICAgdGhpcy5zZW5kTWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnY2FuZGlkYXRlJywKICAgICAgICAgIGxhYmVsOiBldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCwKICAgICAgICAgIGlkOiBldmVudC5jYW5kaWRhdGUuc2RwTWlkLAogICAgICAgICAgY2FuZGlkYXRlOiBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ0VuZCBvZiBjYW5kaWRhdGVzLicpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ3JlYXRlT2ZmZXJFcnJvcjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGVPZmZlcigpIGVycm9yOiAnLCBldmVudCk7CiAgICB9LAogICAgZG9DYWxsOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdTZW5kaW5nIG9mZmVyIHRvIHBlZXInKTsKICAgICAgdGhpcy5wYy5jcmVhdGVPZmZlcih0aGlzLnNldExvY2FsQW5kU2VuZE1lc3NhZ2UsIHRoaXMuaGFuZGxlQ3JlYXRlT2ZmZXJFcnJvcik7CiAgICB9LAogICAgc2V0TG9jYWxBbmRTZW5kTWVzc2FnZTogZnVuY3Rpb24gKHNlc3Npb25EZXNjcmlwdGlvbikgewogICAgICB0aGlzLnBjLnNldExvY2FsRGVzY3JpcHRpb24oc2Vzc2lvbkRlc2NyaXB0aW9uKTsKICAgICAgY29uc29sZS5sb2coJ3NldExvY2FsQW5kU2VuZE1lc3NhZ2Ugc2VuZGluZyBtZXNzYWdlJywgc2Vzc2lvbkRlc2NyaXB0aW9uKTsKICAgICAgdGhpcy5zZW5kTWVzc2FnZShzZXNzaW9uRGVzY3JpcHRpb24pOwogICAgfSwKICAgIGhhbmRsZVJlbW90ZVN0cmVhbVJlbW92ZWQ6IGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zb2xlLmxvZygnUmVtb3RlIHN0cmVhbSByZW1vdmVkLiBFdmVudDogJywgZXZlbnQpOwogICAgfSwKICAgIGhhbmRsZVJlbW90ZUhhbmd1cDogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiB0ZXJtaW5hdGVkLicpOwogICAgICB0aGlzLnN0b3AoKTsKICAgICAgdGhpcy5pc0luaXRpYXRvciA9IGZhbHNlOwogICAgfSwKICAgIHN0b3A6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pc1N0YXJ0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5wYy5jbG9zZSgpOwogICAgICB0aGlzLnBjID0gbnVsbDsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc3RvcmVfaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICB0aGlzLnNlc3Npb24gPSB0aGlzLiRyb3V0ZS5wYXJhbXMuY29udGFjdF9pZDsKICAgIHRoaXMuc29ja2V0ID0gaW8uY29ubmVjdCgpOwoKICAgIGlmICh0aGlzLnNlc3Npb24gIT09ICcnKSB7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoJ2NyZWF0ZSBvciBqb2luJywgdGhpcy5zZXNzaW9uKTsKICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRlZCB0byBjcmVhdGUgb3Igam9pbiByb29tOiAnLCB0aGlzLnNlc3Npb24pOwogICAgfQoKICAgIHRoaXMuc29ja2V0Lm9uKCdjcmVhdGVkJywgcm9vbSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGVkIHJvb20gJyArIHJvb20pOwogICAgICB0aGlzLmlzSW5pdGlhdG9yID0gdHJ1ZTsKICAgIH0pOwogICAgdGhpcy5zb2NrZXQub24oJ2Z1bGwnLCByb29tID0+IHsKICAgICAgY29uc29sZS5sb2coJ1Jvb20gJyArIHJvb20gKyAnIGlzIGZ1bGwnKTsKICAgIH0pOwogICAgdGhpcy5zb2NrZXQub24oJ2pvaW4nLCByb29tID0+IHsKICAgICAgY29uc29sZS5sb2coJ0Fub3RoZXIgcGVlciBtYWRlIGEgcmVxdWVzdCB0byBqb2luIHJvb20gJyArIHJvb20pOwogICAgICBjb25zb2xlLmxvZygnVGhpcyBwZWVyIGlzIHRoZSBpbml0aWF0b3Igb2Ygcm9vbSAnICsgcm9vbSArICchJyk7CiAgICAgIHRoaXMuaXNDaGFubmVsUmVhZHkgPSB0cnVlOwogICAgfSk7CiAgICB0aGlzLnNvY2tldC5vbignam9pbmVkJywgcm9vbSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdqb2luZWQ6ICcgKyByb29tKTsKICAgICAgdGhpcy5pc0NoYW5uZWxSZWFkeSA9IHRydWU7CiAgICB9KTsKICAgIHRoaXMuc29ja2V0Lm9uKCdsb2cnLCBhcnJheSA9PiB7CiAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFycmF5KTsKICAgIH0pOyAvLyBUaGlzIGNsaWVudCByZWNlaXZlcyBhIG1lc3NhZ2UKCiAgICB0aGlzLnNvY2tldC5vbignbWVzc2FnZScsIG1lc3NhZ2UgPT4gewogICAgICBjb25zb2xlLmxvZygnQ2xpZW50IHJlY2VpdmVkIG1lc3NhZ2U6JywgbWVzc2FnZSk7CgogICAgICBpZiAobWVzc2FnZSA9PT0gJ2dvdCB1c2VyIG1lZGlhJykgewogICAgICAgIHRoaXMubWF5YmVTdGFydCgpOwogICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ2Fuc3dlcicgJiYgdGhpcy5pc1N0YXJ0ZWQpIHsKICAgICAgICB0aGlzLnBjLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obWVzc2FnZSkpOwogICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ2NhbmRpZGF0ZScgJiYgdGhpcy5pc1N0YXJ0ZWQpIHsKICAgICAgICB2YXIgY2FuZGlkYXRlID0gbmV3IFJUQ0ljZUNhbmRpZGF0ZSh7CiAgICAgICAgICBzZHBNTGluZUluZGV4OiBtZXNzYWdlLmxhYmVsLAogICAgICAgICAgY2FuZGlkYXRlOiBtZXNzYWdlLmNhbmRpZGF0ZQogICAgICAgIH0pOwogICAgICAgIHRoaXMucGMuYWRkSWNlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7CiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZSA9PT0gJ2J5ZScgJiYgdGhpcy5pc1N0YXJ0ZWQpIHsKICAgICAgICB0aGlzLmhhbmRsZVJlbW90ZUhhbmd1cCgpOwogICAgICB9CiAgICB9KTsKICAgIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CiAgICAgIGF1ZGlvOiBmYWxzZSwKICAgICAgdmlkZW86IHRydWUKICAgIH0pLnRoZW4odGhpcy5nb3RTdHJlYW0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIGFsZXJ0KCdnZXRVc2VyTWVkaWEoKSBlcnJvcjogJyArIGUubmFtZSk7CiAgICB9KTsKCiAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSAoKSA9PiB7CiAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoJ2J5ZScpOwogICAgfTsKICB9Cn07"},{"version":3,"sources":["Live.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAqBA,OAAA,gBAAA;AACA,OAAA,EAAA,MAAA,kBAAA;AAEA,IAAA,QAAA,GAAA;AACA,gBAAA,CAAA;AACA,YAAA;AADA,GAAA,EAGA;AACA,YAAA,mBADA;AAEA,kBAAA,OAFA;AAGA,gBAAA;AAHA,GAHA;AADA,CAAA;AAWA,eAAA;AACA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,OAAA,CAAA,GAAA,CAAA,QADA;AAEA,MAAA,QAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA,cAJA;AAKA,MAAA,cAAA,EAAA,KALA;AAMA,MAAA,WAAA,EAAA,KANA;AAOA,MAAA,SAAA,EAAA,KAPA;AAQA,MAAA,WAAA,EAAA,IARA;AASA,MAAA,EAAA,EAAA,IATA;AAUA,MAAA,MAAA,EAAA;AAVA,KAAA;AAYA,GAdA;;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,WAAA,EAAA,UAAA,OAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,0BAAA,EAAA,OAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,SAAA,EAAA,OAAA;AACA,KAJA;AAKA,IAAA,SAAA,EAAA,UAAA,MAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,sBAAA;AACA,WAAA,WAAA,GAAA,MAAA;AACA,UAAA,UAAA,GAAA,QAAA,CAAA,aAAA,CAAA,aAAA,CAAA;AACA,MAAA,UAAA,CAAA,SAAA,GAAA,MAAA;AACA,WAAA,WAAA,CAAA,gBAAA;;AACA,UAAA,KAAA,WAAA,EAAA;AACA,aAAA,UAAA;AACA;AACA,KAdA;AAeA,IAAA,UAAA,EAAA,YAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,uBAAA,EAAA,KAAA,SAAA,EAAA,KAAA,WAAA,EAAA,KAAA,cAAA;;AACA,UAAA,CAAA,KAAA,SAAA,IAAA,OAAA,KAAA,WAAA,KAAA,WAAA,IAAA,KAAA,cAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,iCAAA;AACA,aAAA,oBAAA;AACA,aAAA,EAAA,CAAA,SAAA,CAAA,KAAA,WAAA;AACA,aAAA,SAAA,GAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,aAAA,EAAA,KAAA,WAAA;;AACA,YAAA,KAAA,WAAA,EAAA;AACA,eAAA,MAAA;AACA;AACA;AACA,KA3BA;AA4BA,IAAA,oBAAA,EAAA,YAAA;AACA,UAAA;AACA,aAAA,EAAA,GAAA,IAAA,iBAAA,CAAA,QAAA,CAAA;AACA,aAAA,EAAA,CAAA,cAAA,GAAA,KAAA,kBAAA;AACA,aAAA,EAAA,CAAA,cAAA,GAAA,KAAA,yBAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,4BAAA;AACA,OALA,CAKA,OAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,iDAAA,CAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,yCAAA,CAAA;AACA;AACA,KAtCA;AAuCA,IAAA,kBAAA,EAAA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,sBAAA,EAAA,KAAA;;AACA,UAAA,KAAA,CAAA,SAAA,EAAA;AACA,aAAA,WAAA,CAAA;AACA,UAAA,IAAA,EAAA,WADA;AAEA,UAAA,KAAA,EAAA,KAAA,CAAA,SAAA,CAAA,aAFA;AAGA,UAAA,EAAA,EAAA,KAAA,CAAA,SAAA,CAAA,MAHA;AAIA,UAAA,SAAA,EAAA,KAAA,CAAA,SAAA,CAAA;AAJA,SAAA;AAMA,OAPA,MAOA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,oBAAA;AACA;AACA,KAnDA;AAoDA,IAAA,sBAAA,EAAA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,uBAAA,EAAA,KAAA;AACA,KAtDA;AAuDA,IAAA,MAAA,EAAA,YAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,uBAAA;AACA,WAAA,EAAA,CAAA,WAAA,CAAA,KAAA,sBAAA,EAAA,KAAA,sBAAA;AACA,KA1DA;AA2DA,IAAA,sBAAA,EAAA,UAAA,kBAAA,EAAA;AACA,WAAA,EAAA,CAAA,mBAAA,CAAA,kBAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,wCAAA,EAAA,kBAAA;AACA,WAAA,WAAA,CAAA,kBAAA;AACA,KA/DA;AAgEA,IAAA,yBAAA,EAAA,UAAA,KAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gCAAA,EAAA,KAAA;AACA,KAlEA;AAmEA,IAAA,kBAAA,EAAA,YAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,qBAAA;AACA,WAAA,IAAA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,KAvEA;AAwEA,IAAA,IAAA,EAAA,YAAA;AACA,WAAA,SAAA,GAAA,KAAA;AACA,WAAA,EAAA,CAAA,KAAA;AACA,WAAA,EAAA,GAAA,IAAA;AACA;AA5EA,GAfA;AA6FA,EAAA,OAAA,EAAA,YAAA;AACA,SAAA,QAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,SAAA,OAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,UAAA;AAEA,SAAA,MAAA,GAAA,EAAA,CAAA,OAAA,EAAA;;AAEA,QAAA,KAAA,OAAA,KAAA,EAAA,EAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,gBAAA,EAAA,KAAA,OAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,oCAAA,EAAA,KAAA,OAAA;AACA;;AAEA,SAAA,MAAA,CAAA,EAAA,CAAA,SAAA,EAAA,IAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,kBAAA,IAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,KAHA;AAKA,SAAA,MAAA,CAAA,EAAA,CAAA,MAAA,EAAA,IAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA,IAAA,GAAA,UAAA;AACA,KAFA;AAIA,SAAA,MAAA,CAAA,EAAA,CAAA,MAAA,EAAA,IAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,8CAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,wCAAA,IAAA,GAAA,GAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KAJA;AAMA,SAAA,MAAA,CAAA,EAAA,CAAA,QAAA,EAAA,IAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,aAAA,IAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KAHA;AAKA,SAAA,MAAA,CAAA,EAAA,CAAA,KAAA,EAAA,KAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,OAAA,EAAA,KAAA;AACA,KAFA,EA/BA,CAmCA;;AACA,SAAA,MAAA,CAAA,EAAA,CAAA,SAAA,EAAA,OAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,0BAAA,EAAA,OAAA;;AACA,UAAA,OAAA,KAAA,gBAAA,EAAA;AACA,aAAA,UAAA;AACA,OAFA,MAEA,IAAA,OAAA,CAAA,IAAA,KAAA,QAAA,IAAA,KAAA,SAAA,EAAA;AACA,aAAA,EAAA,CAAA,oBAAA,CAAA,IAAA,qBAAA,CAAA,OAAA,CAAA;AACA,OAFA,MAEA,IAAA,OAAA,CAAA,IAAA,KAAA,WAAA,IAAA,KAAA,SAAA,EAAA;AACA,YAAA,SAAA,GAAA,IAAA,eAAA,CAAA;AACA,UAAA,aAAA,EAAA,OAAA,CAAA,KADA;AAEA,UAAA,SAAA,EAAA,OAAA,CAAA;AAFA,SAAA,CAAA;AAIA,aAAA,EAAA,CAAA,eAAA,CAAA,SAAA;AACA,OANA,MAMA,IAAA,OAAA,KAAA,KAAA,IAAA,KAAA,SAAA,EAAA;AACA,aAAA,kBAAA;AACA;AACA,KAfA;AAiBA,IAAA,MAAA,CAAA,SAAA,CAAA,YAAA,CAAA,YAAA,CAAA;AACA,MAAA,KAAA,EAAA,KADA;AAEA,MAAA,KAAA,EAAA;AAFA,KAAA,EAIA,IAJA,CAIA,KAAA,SAJA,EAKA,KALA,CAKA,UAAA,CAAA,EAAA;AACA,MAAA,KAAA,CAAA,2BAAA,CAAA,CAAA,IAAA,CAAA;AACA,KAPA;;AASA,IAAA,MAAA,CAAA,cAAA,GAAA,MAAA;AACA,WAAA,WAAA,CAAA,KAAA;AACA,KAFA;AAGA;AA9JA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container mt-3\">\r\n    <small class=\"text-muted\">{{ $options.__file }}</small>\r\n    <h1 class=\"text-primary font-weight-bold\">\r\n      <router-link to=\"/\"><img src=\"~bootstrap-icons/icons/caret-left-fill.svg\" alt=\"caret icon\" width=\"30\" height=\"30\"></router-link>\r\n      Live-streaming con {{ name }}\r\n    </h1>\r\n    <p>Invia questo link a {{ name }}: <a target=\"_blank\" :href=\"'https://zuly.it/store/' + store_id + '/live/' + session\">https://zuly.it/store/{{ store_id }}/live/{{ session }}</a></p>\r\n    <div class=\"btn-group\" role=\"group\" aria-label=\"Invia live-streaming link\">\r\n      <a class=\"btn btn-secondary\" href=\"#\" role=\"button\"><img src=\"~bootstrap-icons/icons/telephone-outbound.svg\" alt=\"phone icon\" width=\"30\" height=\"30\"> Invia con un SMS</a>\r\n      <a class=\"btn btn-secondary\" href=\"#\" role=\"button\"><img :src=\"publicPath + 'WhatsApp.svg'\" alt=\"whatsapp icon\" width=\"30\" height=\"30\"> Invia con WhatsApp</a>\r\n      <a class=\"btn btn-secondary\" href=\"#\" role=\"button\"><img src=\"~bootstrap-icons/icons/envelope.svg\" alt=\"email icon\" width=\"30\" height=\"30\"> Invia tramite E-mail</a>\r\n    </div>\r\n    <hr>\r\n    <video id=\"localVideo\" autoplay muted playsinline class=\"mx-auto\"></video>\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg w-100 mt-3 mb-3\">Termina il live-streaming</button>\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg w-100 mt-3 mb-3\">Proposta di acquisto</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'webrtc-adapter'\r\nimport io from 'socket.io-client'\r\n\r\nvar pcConfig = {\r\n  'iceServers': [{\r\n    'urls': 'stun:stun.l.google.com:19302'\r\n  },\r\n  {\r\n    'urls': 'turn:zuly.it:3478',\r\n    'credential': 'test1',\r\n    'username': 'test1'\r\n  }]\r\n}\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      publicPath: process.env.BASE_URL,\r\n      store_id: null,\r\n      session: '',\r\n      name: 'Paolo Greppi',\r\n      isChannelReady: false,\r\n      isInitiator: false,\r\n      isStarted: false,\r\n      localStream: null,\r\n      pc: null,\r\n      socket: null\r\n    }\r\n  },\r\n  methods: {\r\n    sendMessage: function (message) {\r\n      console.log('Client sending message: ', message)\r\n      this.socket.emit('message', message)\r\n    },\r\n    gotStream: function (stream) {\r\n      console.log('Adding local stream.')\r\n      this.localStream = stream\r\n      var localVideo = document.querySelector('#localVideo')\r\n      localVideo.srcObject = stream\r\n      this.sendMessage('got user media')\r\n      if (this.isInitiator) {\r\n        this.maybeStart()\r\n      }\r\n    },\r\n    maybeStart: function () {\r\n      console.log('>>>>>>> maybeStart() ', this.isStarted, this.localStream, this.isChannelReady)\r\n      if (!this.isStarted && typeof this.localStream !== 'undefined' && this.isChannelReady) {\r\n        console.log('>>>>>> creating peer connection')\r\n        this.createPeerConnection()\r\n        this.pc.addStream(this.localStream)\r\n        this.isStarted = true\r\n        console.log('isInitiator', this.isInitiator)\r\n        if (this.isInitiator) {\r\n          this.doCall()\r\n        }\r\n      }\r\n    },\r\n    createPeerConnection: function () {\r\n      try {\r\n        this.pc = new RTCPeerConnection(pcConfig)\r\n        this.pc.onicecandidate = this.handleIceCandidate\r\n        this.pc.onremovestream = this.handleRemoteStreamRemoved\r\n        console.log('Created RTCPeerConnnection')\r\n      } catch (e) {\r\n        console.log('Failed to create PeerConnection, exception: ' + e.message)\r\n        alert('Cannot create RTCPeerConnection object.')\r\n      }\r\n    },\r\n    handleIceCandidate: function (event) {\r\n      console.log('icecandidate event: ', event)\r\n      if (event.candidate) {\r\n        this.sendMessage({\r\n          type: 'candidate',\r\n          label: event.candidate.sdpMLineIndex,\r\n          id: event.candidate.sdpMid,\r\n          candidate: event.candidate.candidate\r\n        })\r\n      } else {\r\n        console.log('End of candidates.')\r\n      }\r\n    },\r\n    handleCreateOfferError: function (event) {\r\n      console.log('createOffer() error: ', event)\r\n    },\r\n    doCall: function () {\r\n      console.log('Sending offer to peer')\r\n      this.pc.createOffer(this.setLocalAndSendMessage, this.handleCreateOfferError)\r\n    },\r\n    setLocalAndSendMessage: function (sessionDescription) {\r\n      this.pc.setLocalDescription(sessionDescription)\r\n      console.log('setLocalAndSendMessage sending message', sessionDescription)\r\n      this.sendMessage(sessionDescription)\r\n    },\r\n    handleRemoteStreamRemoved: function (event) {\r\n      console.log('Remote stream removed. Event: ', event)\r\n    },\r\n    handleRemoteHangup: function () {\r\n      console.log('Session terminated.')\r\n      this.stop()\r\n      this.isInitiator = false\r\n    },\r\n    stop: function () {\r\n      this.isStarted = false\r\n      this.pc.close()\r\n      this.pc = null\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.store_id = this.$route.params.id\r\n    this.session = this.$route.params.contact_id\r\n\r\n    this.socket = io.connect()\r\n\r\n    if (this.session !== '') {\r\n      this.socket.emit('create or join', this.session)\r\n      console.log('Attempted to create or join room: ', this.session)\r\n    }\r\n\r\n    this.socket.on('created', (room) => {\r\n      console.log('Created room ' + room)\r\n      this.isInitiator = true\r\n    })\r\n\r\n    this.socket.on('full', (room) => {\r\n      console.log('Room ' + room + ' is full')\r\n    })\r\n\r\n    this.socket.on('join', (room) => {\r\n      console.log('Another peer made a request to join room ' + room)\r\n      console.log('This peer is the initiator of room ' + room + '!')\r\n      this.isChannelReady = true\r\n    })\r\n\r\n    this.socket.on('joined', (room) => {\r\n      console.log('joined: ' + room)\r\n      this.isChannelReady = true\r\n    })\r\n\r\n    this.socket.on('log', (array) => {\r\n      console.log.apply(console, array)\r\n    })\r\n\r\n    // This client receives a message\r\n    this.socket.on('message', (message) => {\r\n      console.log('Client received message:', message)\r\n      if (message === 'got user media') {\r\n        this.maybeStart()\r\n      } else if (message.type === 'answer' && this.isStarted) {\r\n        this.pc.setRemoteDescription(new RTCSessionDescription(message))\r\n      } else if (message.type === 'candidate' && this.isStarted) {\r\n        var candidate = new RTCIceCandidate({\r\n          sdpMLineIndex: message.label,\r\n          candidate: message.candidate\r\n        })\r\n        this.pc.addIceCandidate(candidate)\r\n      } else if (message === 'bye' && this.isStarted) {\r\n        this.handleRemoteHangup()\r\n      }\r\n    })\r\n\r\n    window.navigator.mediaDevices.getUserMedia({\r\n      audio: false,\r\n      video: true\r\n    })\r\n      .then(this.gotStream)\r\n      .catch(function (e) {\r\n        alert('getUserMedia() error: ' + e.name)\r\n      })\r\n\r\n    window.onbeforeunload = () => {\r\n      this.sendMessage('bye')\r\n    }\r\n  }\r\n}\r\n\r\n</script>"],"sourceRoot":"src/pages"}]}
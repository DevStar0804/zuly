{"remainingRequest":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\babel-loader\\lib\\index.js!D:\\working\\Vue\\zuly\\zuly\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\working\\Vue\\zuly\\zuly\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\working\\Vue\\zuly\\zuly\\src\\pages\\ResetPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\working\\Vue\\zuly\\zuly\\src\\pages\\ResetPassword.vue","mtime":1603842703512},{"path":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogJycsCiAgICAgIHN1Y2Nlc3NNZXNzYWdlOiAnTWFuZGVyZW1vIHVuXCdlbWFpbCBhIHF1ZXN0byBpbmRpenpvLicsCiAgICAgIGVycm9yTWVzc2FnZTogJycsCiAgICAgIGRpc2FibGVkOiBmYWxzZQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBwb3N0UmVxdWVzdCgpIHsKICAgICAgbGV0IHBheWxvYWQgPSB7CiAgICAgICAgZW1haWw6IHRoaXMuZW1haWwKICAgICAgfTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wYXNzd2QnLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0sCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCkKICAgICAgfSk7CiAgICAgIHJldHVybiByZXNwb25zZTsKICAgIH0sCgogICAgcmVxdWVzdFBhc3N3b3JkOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJyc7CiAgICAgIHZhciBlbWFpbEZpbHRlciA9IC9eKFthLXpBLVowLTlfLi1dK1wrP1thLXpBLVowLTlfLi1dKylAKChbYS16QS1aMC05LV0pKy4pKyhbYS16QS1aMC05XXsyLDR9KSskLzsKCiAgICAgIGlmICghZW1haWxGaWx0ZXIudGVzdCh0aGlzLmVtYWlsKSkgewogICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ0luc2VyaXNjaSB1biBpbmRpcml6em8gZW1haWwgdmFsaWRvLic7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucG9zdFJlcXVlc3QoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICB0aGlzLnN1Y2Nlc3NNZXNzYWdlID0gJ0FiYmlhbW8gbWFuZGF0byB1blwnZW1haWwgYWxsXCdpbmRpcml6em8gaW5kaWNhdG8sIGNvbiBsZSBpc3RydXppb25pIHBlciByaS1pbXBvc3RhcmUgbGEgdHVhIHBhc3N3b3JkIHN1IFp1bHkuJzsKICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICdDXCfDqCBzdGF0byB1biBwcm9ibGVtYS4gUmlwcm92YSBwacO5IHRhcmRpLic7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["ResetPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAsBA,eAAA;AACA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,cAAA,EAAA,uCAFA;AAGA,MAAA,YAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA;AAJA,KAAA;AAMA,GARA;;AASA,EAAA,OAAA,EAAA;AACA,UAAA,WAAA,GAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,KAAA,EAAA,KAAA;AADA,OAAA;AAGA,YAAA,QAAA,GAAA,MAAA,KAAA,CAAA,aAAA,EAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,OAAA,EAAA;AAAA,0BAAA;AAAA,SAFA;AAGA,QAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA;AAHA,OAAA,CAAA;AAMA,aAAA,QAAA;AACA,KAZA;;AAaA,IAAA,eAAA,EAAA,YAAA;AACA,WAAA,YAAA,GAAA,EAAA;AACA,UAAA,WAAA,GAAA,8EAAA;;AACA,UAAA,CAAA,WAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AACA,aAAA,YAAA,GAAA,sCAAA;AACA,eAAA,KAAA;AACA,OAHA,MAGA;AACA,aAAA,WAAA,GAAA,IAAA,CAAA,QAAA,IAAA;AACA,cAAA,QAAA,CAAA,EAAA,EAAA;AACA,iBAAA,cAAA,GAAA,gHAAA;AACA,iBAAA,QAAA,GAAA,IAAA;AACA,WAHA,MAGA;AACA,iBAAA,YAAA,GAAA,4CAAA;AACA;AACA,SAPA;AAQA;AACA;AA7BA;AATA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container mt-3\">\r\n    <small class=\"text-muted\">{{ $options.__file }}</small>\r\n    <div class=\"row m-3\">\r\n      <div class=\"col-md-4 offset-md-4\">\r\n        <h1 class=\"text-center\">Ri-imposta la tua password su Zuly</h1>\r\n        <h3 class=\"text-center text-muted\">(riservato ai negozi)</h3>\r\n        <form>\r\n          <div class=\"mb-3\">\r\n            <label for=\"inputEmail\" class=\"form-label\">Indirizzo email</label>\r\n            <input type=\"email\" class=\"form-control\" id=\"inputEmail\" aria-describedby=\"emailHelp\" placeholder=\"tua.email@esempio.it\" v-model=\"email\">\r\n            <div class=\"alert-danger my-3\" v-show=\"errorMessage\">{{ errorMessage }}</div>\r\n            <p id=\"emailHelp\" class=\"text-muted my-3\">{{ successMessage }}</p>\r\n          </div>\r\n          <button :disabled=\"disabled || email === ''\" type=\"button\" class=\"btn btn-primary\" v-on:click=\"requestPassword()\">Invia la richiesta</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      email: '',\r\n      successMessage: 'Manderemo un\\'email a questo indizzo.',\r\n      errorMessage: '',\r\n      disabled: false\r\n    }\r\n  },\r\n  methods: {\r\n    async postRequest () {\r\n      let payload = {\r\n        email: this.email\r\n      }\r\n      const response = await fetch('/api/passwd', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      }\r\n      )\r\n      return response\r\n    },\r\n    requestPassword: function () {\r\n      this.errorMessage = ''\r\n      var emailFilter = /^([a-zA-Z0-9_.-]+\\+?[a-zA-Z0-9_.-]+)@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/\r\n      if (!emailFilter.test(this.email)) {\r\n        this.errorMessage = 'Inserisci un indirizzo email valido.'\r\n        return false\r\n      } else {\r\n        this.postRequest().then(response => {\r\n          if (response.ok) {\r\n            this.successMessage = 'Abbiamo mandato un\\'email all\\'indirizzo indicato, con le istruzioni per ri-impostare la tua password su Zuly.'\r\n            this.disabled = true\r\n          } else {\r\n            this.errorMessage = 'C\\'è stato un problema. Riprova più tardi.'\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\n"],"sourceRoot":"src/pages"}]}
{"remainingRequest":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\babel-loader\\lib\\index.js!D:\\working\\Vue\\zuly\\zuly\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\working\\Vue\\zuly\\zuly\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\working\\Vue\\zuly\\zuly\\src\\pages\\Live.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\working\\Vue\\zuly\\zuly\\src\\pages\\Live.vue","mtime":1603842703511},{"path":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\zuly\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICd3ZWJydGMtYWRhcHRlcic7CmltcG9ydCBpbyBmcm9tICdzb2NrZXQuaW8tY2xpZW50JzsKdmFyIHBjQ29uZmlnID0gewogICdpY2VTZXJ2ZXJzJzogW3sKICAgICd1cmxzJzogJ3N0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDInCiAgfSwgewogICAgJ3VybHMnOiAndHVybjp6dWx5Lml0OjM0NzgnLAogICAgJ2NyZWRlbnRpYWwnOiAndGVzdDEnLAogICAgJ3VzZXJuYW1lJzogJ3Rlc3QxJwogIH1dCn07CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHVibGljUGF0aDogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgICAgIHN0b3JlX2lkOiBudWxsLAogICAgICBjb250YWN0X2lkOiAnJywKICAgICAgbmFtZTogJ1Bhb2xvIEdyZXBwaScKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdDbGllbnQgc2VuZGluZyBtZXNzYWdlOiAnLCBtZXNzYWdlKTsKICAgICAgdGhpcy4kcGFyZW50LnNvY2tldC5lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7CiAgICB9LAogICAgZ290U3RyZWFtOiBmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgIGNvbnNvbGUubG9nKCdBZGRpbmcgbG9jYWwgc3RyZWFtLicpOwogICAgICB0aGlzLiRwYXJlbnQubG9jYWxTdHJlYW0gPSBzdHJlYW07CiAgICAgIHZhciBsb2NhbFZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvY2FsVmlkZW8nKTsKICAgICAgbG9jYWxWaWRlby5zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgIHRoaXMuJHBhcmVudC5saXZlX3N0cmVhbWluZyA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTsKICAgIH0sCiAgICBtYXliZVN0YXJ0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCc+Pj4+Pj4+IG1heWJlU3RhcnQoKSAnLCB0aGlzLiRwYXJlbnQuaXNTdGFydGVkLCB0aGlzLiRwYXJlbnQubG9jYWxTdHJlYW0sIHRoaXMuJHBhcmVudC5pc0NoYW5uZWxSZWFkeSk7CgogICAgICBpZiAodHlwZW9mIHRoaXMuJHBhcmVudC5sb2NhbFN0cmVhbSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy4kcGFyZW50LmlzQ2hhbm5lbFJlYWR5KSB7CiAgICAgICAgY29uc29sZS5sb2coJz4+Pj4+PiBjcmVhdGluZyBwZWVyIGNvbm5lY3Rpb24nKTsKICAgICAgICB0aGlzLmNyZWF0ZVBlZXJDb25uZWN0aW9uKCk7CiAgICAgICAgdGhpcy4kcGFyZW50LnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbSh0aGlzLiRwYXJlbnQubG9jYWxTdHJlYW0pOwogICAgICAgIHRoaXMuJHBhcmVudC5pc1N0YXJ0ZWQgPSB0cnVlOwogICAgICAgIHRoaXMuZG9DYWxsKCk7CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVQZWVyQ29ubmVjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuJHBhcmVudC5wZWVyQ29ubmVjdGlvbiA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZyk7CiAgICAgICAgdGhpcy4kcGFyZW50LnBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlID0gdGhpcy5oYW5kbGVJY2VDYW5kaWRhdGU7CiAgICAgICAgdGhpcy4kcGFyZW50LnBlZXJDb25uZWN0aW9uLm9ucmVtb3Zlc3RyZWFtID0gdGhpcy5oYW5kbGVSZW1vdGVTdHJlYW1SZW1vdmVkOwogICAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGVkIFJUQ1BlZXJDb25ubmVjdGlvbicpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBjcmVhdGUgUGVlckNvbm5lY3Rpb24sIGV4Y2VwdGlvbjogJyArIGUubWVzc2FnZSk7CiAgICAgICAgYWxlcnQoJ0Nhbm5vdCBjcmVhdGUgUlRDUGVlckNvbm5lY3Rpb24gb2JqZWN0LicpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlSWNlQ2FuZGlkYXRlOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgY29uc29sZS5sb2coJ2ljZWNhbmRpZGF0ZSBldmVudDogJywgZXZlbnQpOwoKICAgICAgaWYgKGV2ZW50LmNhbmRpZGF0ZSkgewogICAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2NhbmRpZGF0ZScsCiAgICAgICAgICBsYWJlbDogZXZlbnQuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsCiAgICAgICAgICBpZDogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCwKICAgICAgICAgIGNhbmRpZGF0ZTogZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdFbmQgb2YgY2FuZGlkYXRlcy4nKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNyZWF0ZU9mZmVyRXJyb3I6IGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zb2xlLmxvZygnY3JlYXRlT2ZmZXIoKSBlcnJvcjogJywgZXZlbnQpOwogICAgfSwKICAgIGRvQ2FsbDogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZygnU2VuZGluZyBvZmZlciB0byBwZWVyJyk7CiAgICAgIHRoaXMuJHBhcmVudC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcih0aGlzLnNldExvY2FsQW5kU2VuZE1lc3NhZ2UsIHRoaXMuaGFuZGxlQ3JlYXRlT2ZmZXJFcnJvcik7CiAgICB9LAogICAgc2V0TG9jYWxBbmRTZW5kTWVzc2FnZTogZnVuY3Rpb24gKHNlc3Npb25EZXNjcmlwdGlvbikgewogICAgICB0aGlzLiRwYXJlbnQucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihzZXNzaW9uRGVzY3JpcHRpb24pOwogICAgICBjb25zb2xlLmxvZygnc2V0TG9jYWxBbmRTZW5kTWVzc2FnZSBzZW5kaW5nIG1lc3NhZ2UnLCBzZXNzaW9uRGVzY3JpcHRpb24pOwogICAgICB0aGlzLnNlbmRNZXNzYWdlKHNlc3Npb25EZXNjcmlwdGlvbik7CiAgICB9LAogICAgaGFuZGxlUmVtb3RlU3RyZWFtUmVtb3ZlZDogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGNvbnNvbGUubG9nKCdSZW1vdGUgc3RyZWFtIHJlbW92ZWQuIEV2ZW50OiAnLCBldmVudCk7CiAgICB9LAogICAgaGFuZ3VwOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdIYW5naW5nIHVwLicpOwogICAgICB0aGlzLnN0b3AoKTsKCiAgICAgIGlmICgnZ2V0VHJhY2tzJyBpbiB0aGlzLiRwYXJlbnQubG9jYWxTdHJlYW0pIHsKICAgICAgICB0aGlzLiRwYXJlbnQubG9jYWxTdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgIGlmICh0cmFjay5yZWFkeVN0YXRlID09PSAnbGl2ZScpIHsKICAgICAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLiRwYXJlbnQuc29ja2V0LmVtaXQoJ2Nsb3NlJywgdGhpcy5jb250YWN0X2lkKTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdGVIYW5ndXA6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gdGVybWluYXRlZC4nKTsKICAgICAgdGhpcy5zdG9wKCk7CiAgICB9LAogICAgc3RvcDogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLiRwYXJlbnQubGl2ZV9zdHJlYW1pbmcgPSAnJzsKICAgICAgdGhpcy4kcGFyZW50LmlzU3RhcnRlZCA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuJHBhcmVudC5wZWVyQ29ubmVjdGlvbikgewogICAgICAgIHRoaXMuJHBhcmVudC5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpOwogICAgICAgIHRoaXMuJHBhcmVudC5wZWVyQ29ubmVjdGlvbiA9IG51bGw7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGNvbnNvbGUubG9nKCdMaXZlIGNyZWF0ZWQnKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGNvbnNvbGUubG9nKCdMaXZlIG1vdW50ZWQnKTsKICAgIHRoaXMuc3RvcmVfaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICB0aGlzLmNvbnRhY3RfaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuY29udGFjdF9pZDsKICAgIHRoaXMuJHBhcmVudC5zb2NrZXQgPSBpby5jb25uZWN0KCk7CiAgICB0aGlzLiRwYXJlbnQuc29ja2V0Lm9uKCdvcGVuZWQnLCByb29tID0+IHsKICAgICAgY29uc29sZS5sb2coJ09wZW5lZCByb29tICcgKyByb29tKTsKICAgIH0pOwogICAgdGhpcy4kcGFyZW50LnNvY2tldC5vbignZnVsbCcsIHJvb20gPT4gewogICAgICBjb25zb2xlLmxvZygnUm9vbSAnICsgcm9vbSArICcgaXMgZnVsbCcpOwogICAgfSk7CiAgICB0aGlzLiRwYXJlbnQuc29ja2V0Lm9uKCdqb2luJywgcm9vbSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdBbm90aGVyIHBlZXIgbWFkZSBhIHJlcXVlc3QgdG8gam9pbiByb29tICcgKyByb29tKTsKICAgICAgY29uc29sZS5sb2coJ1RoaXMgcGVlciBpcyB0aGUgaW5pdGlhdG9yIG9mIHJvb20gJyArIHJvb20gKyAnIScpOwogICAgICB0aGlzLiRwYXJlbnQuaXNDaGFubmVsUmVhZHkgPSB0cnVlOwogICAgfSk7CiAgICB0aGlzLiRwYXJlbnQuc29ja2V0Lm9uKCdqb2luZWQnLCByb29tID0+IHsKICAgICAgY29uc29sZS5sb2coJ2pvaW5lZDogJyArIHJvb20pOwogICAgICB0aGlzLiRwYXJlbnQuaXNDaGFubmVsUmVhZHkgPSB0cnVlOwogICAgfSk7CiAgICB0aGlzLiRwYXJlbnQuc29ja2V0Lm9uKCdsb2cnLCBhcnJheSA9PiB7CiAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFycmF5KTsKICAgIH0pOyAvLyBUaGlzIGNsaWVudCByZWNlaXZlcyBhIG1lc3NhZ2UKCiAgICB0aGlzLiRwYXJlbnQuc29ja2V0Lm9uKCdtZXNzYWdlJywgbWVzc2FnZSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdDbGllbnQgcmVjZWl2ZWQgbWVzc2FnZTonLCBtZXNzYWdlKTsKCiAgICAgIGlmIChtZXNzYWdlID09PSAnZ290IHVzZXIgbWVkaWEnKSB7CiAgICAgICAgdGhpcy5tYXliZVN0YXJ0KCk7CiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnYW5zd2VyJyAmJiB0aGlzLiRwYXJlbnQuaXNTdGFydGVkKSB7CiAgICAgICAgdGhpcy4kcGFyZW50LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obWVzc2FnZSkpOwogICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ2NhbmRpZGF0ZScgJiYgdGhpcy4kcGFyZW50LmlzU3RhcnRlZCkgewogICAgICAgIHZhciBjYW5kaWRhdGUgPSBuZXcgUlRDSWNlQ2FuZGlkYXRlKHsKICAgICAgICAgIHNkcE1MaW5lSW5kZXg6IG1lc3NhZ2UubGFiZWwsCiAgICAgICAgICBjYW5kaWRhdGU6IG1lc3NhZ2UuY2FuZGlkYXRlCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kcGFyZW50LnBlZXJDb25uZWN0aW9uLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpOwogICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UgPT09ICdieWUnICYmIHRoaXMuJHBhcmVudC5pc1N0YXJ0ZWQpIHsKICAgICAgICB0aGlzLmhhbmRsZVJlbW90ZUhhbmd1cCgpOwogICAgICB9CiAgICB9KTsKCiAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSAoKSA9PiB7CiAgICAgIHRoaXMuc2VuZE1lc3NhZ2UoJ2J5ZScpOwogICAgICByZXR1cm4gbnVsbDsKICAgIH07CgogICAgaWYgKHRoaXMuJHBhcmVudC5saXZlX3N0cmVhbWluZykgewogICAgICB2YXIgbG9jYWxWaWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2NhbFZpZGVvJyk7CiAgICAgIGxvY2FsVmlkZW8uc3JjT2JqZWN0ID0gdGhpcy4kcGFyZW50LmxvY2FsU3RyZWFtOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRoaXMuY29udGFjdF9pZCAhPT0gJycpIHsKICAgICAgICB0aGlzLiRwYXJlbnQuc29ja2V0LmVtaXQoJ29wZW4nLCB0aGlzLmNvbnRhY3RfaWQpOwogICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0ZWQgdG8gb3BlbiByb29tOiAnLCB0aGlzLmNvbnRhY3RfaWQpOwogICAgICB9IC8vIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CiAgICAgIC8vICAgYXVkaW86IGZhbHNlLAogICAgICAvLyAgIHZpZGVvOiB0cnVlCiAgICAgIC8vIH0pCiAgICAgIC8vICAgLnRoZW4odGhpcy5nb3RTdHJlYW0pCiAgICAgIC8vICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgIC8vICAgICBhbGVydCgnZ2V0VXNlck1lZGlhKCkgZXJyb3I6ICcgKyBlLm5hbWUpCiAgICAgIC8vICAgfSkKCiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Live.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"container mt-3\">\r\n    <small class=\"text-muted\">{{ $options.__file }}</small>\r\n    <h1 class=\"text-primary font-weight-bold\">\r\n      <router-link :to=\"'/contact/' + contact_id\"><img src=\"~bootstrap-icons/icons/caret-left-fill.svg\" alt=\"caret icon\" width=\"30\" height=\"30\"></router-link>\r\n      Live-streaming con {{ name }}\r\n    </h1>\r\n    <p>Invia questo link a {{ name }}: <a target=\"_blank\" :href=\"'https://zuly.it/store/' + store_id + '/live/' + contact_id\">https://zuly.it/store/{{ store_id }}/live/{{ contact_id }}</a></p>\r\n    <div class=\"btn-group\" role=\"group\" aria-label=\"Invia live-streaming link\">\r\n      <a class=\"btn btn-secondary\" href=\"#\" role=\"button\"><img src=\"~bootstrap-icons/icons/telephone-outbound.svg\" alt=\"phone icon\" width=\"30\" height=\"30\"> Invia con un SMS</a>\r\n      <a class=\"btn btn-secondary\" href=\"#\" role=\"button\"><img :src=\"publicPath + 'WhatsApp.svg'\" alt=\"whatsapp icon\" width=\"30\" height=\"30\"> Invia con WhatsApp</a>\r\n      <a class=\"btn btn-secondary\" href=\"#\" role=\"button\"><img src=\"~bootstrap-icons/icons/envelope.svg\" alt=\"email icon\" width=\"30\" height=\"30\"> Invia tramite E-mail</a>\r\n    </div>\r\n    <hr>\r\n    <video id=\"localVideo\" autoplay muted playsinline class=\"mx-auto\"></video>\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg w-100 mt-3 mb-3\" v-on:click=\"hangup\" :disabled=\"!$parent.live_streaming\">Termina il live-streaming</button>\r\n    <button type=\"button\" class=\"btn btn-secondary btn-lg w-100 mt-3 mb-3\">Proposta di acquisto</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'webrtc-adapter'\r\nimport io from 'socket.io-client'\r\n\r\nvar pcConfig = {\r\n  'iceServers': [{\r\n    'urls': 'stun:stun.l.google.com:19302'\r\n  },\r\n  {\r\n    'urls': 'turn:zuly.it:3478',\r\n    'credential': 'test1',\r\n    'username': 'test1'\r\n  }]\r\n}\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      publicPath: process.env.BASE_URL,\r\n      store_id: null,\r\n      contact_id: '',\r\n      name: 'Paolo Greppi'\r\n    }\r\n  },\r\n  methods: {\r\n    sendMessage: function (message) {\r\n      console.log('Client sending message: ', message)\r\n      this.$parent.socket.emit('message', message)\r\n    },\r\n    gotStream: function (stream) {\r\n      console.log('Adding local stream.')\r\n      this.$parent.localStream = stream\r\n      var localVideo = document.querySelector('#localVideo')\r\n      localVideo.srcObject = stream\r\n      this.$parent.live_streaming = window.location.pathname\r\n    },\r\n    maybeStart: function () {\r\n      console.log('>>>>>>> maybeStart() ', this.$parent.isStarted, this.$parent.localStream, this.$parent.isChannelReady)\r\n      if (typeof this.$parent.localStream !== 'undefined' && this.$parent.isChannelReady) {\r\n        console.log('>>>>>> creating peer connection')\r\n        this.createPeerConnection()\r\n        this.$parent.peerConnection.addStream(this.$parent.localStream)\r\n        this.$parent.isStarted = true\r\n        this.doCall()\r\n      }\r\n    },\r\n    createPeerConnection: function () {\r\n      try {\r\n        this.$parent.peerConnection = new RTCPeerConnection(pcConfig)\r\n        this.$parent.peerConnection.onicecandidate = this.handleIceCandidate\r\n        this.$parent.peerConnection.onremovestream = this.handleRemoteStreamRemoved\r\n        console.log('Created RTCPeerConnnection')\r\n      } catch (e) {\r\n        console.log('Failed to create PeerConnection, exception: ' + e.message)\r\n        alert('Cannot create RTCPeerConnection object.')\r\n      }\r\n    },\r\n    handleIceCandidate: function (event) {\r\n      console.log('icecandidate event: ', event)\r\n      if (event.candidate) {\r\n        this.sendMessage({\r\n          type: 'candidate',\r\n          label: event.candidate.sdpMLineIndex,\r\n          id: event.candidate.sdpMid,\r\n          candidate: event.candidate.candidate\r\n        })\r\n      } else {\r\n        console.log('End of candidates.')\r\n      }\r\n    },\r\n    handleCreateOfferError: function (event) {\r\n      console.log('createOffer() error: ', event)\r\n    },\r\n    doCall: function () {\r\n      console.log('Sending offer to peer')\r\n      this.$parent.peerConnection.createOffer(this.setLocalAndSendMessage, this.handleCreateOfferError)\r\n    },\r\n    setLocalAndSendMessage: function (sessionDescription) {\r\n      this.$parent.peerConnection.setLocalDescription(sessionDescription)\r\n      console.log('setLocalAndSendMessage sending message', sessionDescription)\r\n      this.sendMessage(sessionDescription)\r\n    },\r\n    handleRemoteStreamRemoved: function (event) {\r\n      console.log('Remote stream removed. Event: ', event)\r\n    },\r\n    hangup: function () {\r\n      console.log('Hanging up.')\r\n      this.stop()\r\n      if ('getTracks' in this.$parent.localStream) {\r\n        this.$parent.localStream.getTracks().forEach(function (track) {\r\n          if (track.readyState === 'live') {\r\n            track.stop()\r\n          }\r\n        })\r\n      }\r\n      this.$parent.socket.emit('close', this.contact_id)\r\n    },\r\n    handleRemoteHangup: function () {\r\n      console.log('Session terminated.')\r\n      this.stop()\r\n    },\r\n    stop: function () {\r\n      this.$parent.live_streaming = ''\r\n      this.$parent.isStarted = false\r\n      if (this.$parent.peerConnection) {\r\n        this.$parent.peerConnection.close()\r\n        this.$parent.peerConnection = null\r\n      }\r\n    }\r\n  },\r\n  created: function () {\r\n    console.log('Live created')\r\n  },\r\n  mounted: function () {\r\n    console.log('Live mounted')\r\n\r\n    this.store_id = this.$route.params.id\r\n    this.contact_id = this.$route.params.contact_id\r\n\r\n    this.$parent.socket = io.connect()\r\n\r\n    this.$parent.socket.on('opened', (room) => {\r\n      console.log('Opened room ' + room)\r\n    })\r\n\r\n    this.$parent.socket.on('full', (room) => {\r\n      console.log('Room ' + room + ' is full')\r\n    })\r\n\r\n    this.$parent.socket.on('join', (room) => {\r\n      console.log('Another peer made a request to join room ' + room)\r\n      console.log('This peer is the initiator of room ' + room + '!')\r\n      this.$parent.isChannelReady = true\r\n    })\r\n\r\n    this.$parent.socket.on('joined', (room) => {\r\n      console.log('joined: ' + room)\r\n      this.$parent.isChannelReady = true\r\n    })\r\n\r\n    this.$parent.socket.on('log', (array) => {\r\n      console.log.apply(console, array)\r\n    })\r\n\r\n    // This client receives a message\r\n    this.$parent.socket.on('message', (message) => {\r\n      console.log('Client received message:', message)\r\n      if (message === 'got user media') {\r\n        this.maybeStart()\r\n      } else if (message.type === 'answer' && this.$parent.isStarted) {\r\n        this.$parent.peerConnection.setRemoteDescription(new RTCSessionDescription(message))\r\n      } else if (message.type === 'candidate' && this.$parent.isStarted) {\r\n        var candidate = new RTCIceCandidate({\r\n          sdpMLineIndex: message.label,\r\n          candidate: message.candidate\r\n        })\r\n        this.$parent.peerConnection.addIceCandidate(candidate)\r\n      } else if (message === 'bye' && this.$parent.isStarted) {\r\n        this.handleRemoteHangup()\r\n      }\r\n    })\r\n\r\n    window.onbeforeunload = () => {\r\n      this.sendMessage('bye')\r\n      return null\r\n    }\r\n\r\n    if (this.$parent.live_streaming) {\r\n      var localVideo = document.querySelector('#localVideo')\r\n      localVideo.srcObject = this.$parent.localStream\r\n    } else {\r\n      if (this.contact_id !== '') {\r\n        this.$parent.socket.emit('open', this.contact_id)\r\n        console.log('Attempted to open room: ', this.contact_id)\r\n      }\r\n      // window.navigator.mediaDevices.getUserMedia({\r\n      //   audio: false,\r\n      //   video: true\r\n      // })\r\n      //   .then(this.gotStream)\r\n      //   .catch(function (e) {\r\n      //     alert('getUserMedia() error: ' + e.name)\r\n      //   })\r\n    }\r\n  }\r\n}\r\n\r\n</script>\n"],"sourceRoot":"src/pages"}]}
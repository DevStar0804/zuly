{"remainingRequest":"D:\\working\\Vue\\zuly\\node_modules\\babel-loader\\lib\\index.js!D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\working\\Vue\\zuly\\src\\pages\\SetPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\working\\Vue\\zuly\\src\\pages\\SetPassword.vue","mtime":1603842703512},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0b2tlbjogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgcGFzc3dvcmQxOiAnJywKICAgICAgZXJyb3JNZXNzYWdlOiAnJywKICAgICAgc3VjY2VzczogZmFsc2UKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGNoZWNrUGFzc3dvcmQ6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucGFzc3dvcmQgJiYgdGhpcy5wYXNzd29yZCAhPT0gdGhpcy5wYXNzd29yZDEpIHsKICAgICAgICByZXR1cm4gJ0xlIHBhc3N3b3JkIG5vbiBjb21iYWNpYW5vLic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnRva2VuID0gdGhpcy4kcm91dGUucGFyYW1zLnRva2VuOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgcHV0UmVxdWVzdCgpIHsKICAgICAgbGV0IHBheWxvYWQgPSB7CiAgICAgICAgdG9rZW46IHRoaXMudG9rZW4sCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgfTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9wYXNzd2QnLCB7CiAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgfSwKICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXlsb2FkKQogICAgICB9KTsKICAgICAgcmV0dXJuIHJlc3BvbnNlOwogICAgfSwKCiAgICBzZXRQYXNzd29yZDogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnB1dFJlcXVlc3QoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgIHRoaXMuc3VjY2VzcyA9IHRydWU7CiAgICAgICAgICB0aGlzLiRwYXJlbnQucmVxdWVzdGVkUm91dGUgPSAnJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ05vbiBwdW9pIGNhbWJpYXJlIGxhIHBhc3N3b3JkLiBGb3JzZSBpbCBsaW5rIMOoIHNjYWR1dG8/JzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ0NcJ8OoIHN0YXRvIHVuIHByb2JsZW1hLiBSaXByb3ZhIHBpw7kgdGFyZGkuJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["SetPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,eAAA;AACA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA,EAJA;AAKA,MAAA,OAAA,EAAA;AALA,KAAA;AAOA,GATA;;AAUA,EAAA,QAAA,EAAA;AACA,IAAA,aAAA,EAAA,YAAA;AACA,UAAA,KAAA,QAAA,IAAA,KAAA,QAAA,KAAA,KAAA,SAAA,EAAA;AACA,eAAA,6BAAA;AACA,OAFA,MAEA;AACA,eAAA,EAAA;AACA;AACA;AAPA,GAVA;AAmBA,EAAA,OAAA,EAAA,YAAA;AACA,SAAA,KAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,KAAA;AACA,GArBA;AAsBA,EAAA,OAAA,EAAA;AACA,UAAA,UAAA,GAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,KAAA,EAAA,KAAA,KADA;AAEA,QAAA,QAAA,EAAA,KAAA;AAFA,OAAA;AAIA,YAAA,QAAA,GAAA,MAAA,KAAA,CAAA,aAAA,EAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,OAAA,EAAA;AAAA,0BAAA;AAAA,SAFA;AAGA,QAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA;AAHA,OAAA,CAAA;AAMA,aAAA,QAAA;AACA,KAbA;;AAcA,IAAA,WAAA,EAAA,YAAA;AACA,WAAA,UAAA,GAAA,IAAA,CAAA,QAAA,IAAA;AACA,YAAA,QAAA,CAAA,EAAA,EAAA;AACA,eAAA,OAAA,GAAA,IAAA;AACA,eAAA,OAAA,CAAA,cAAA,GAAA,EAAA;AACA,SAHA,MAGA;AACA,cAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,iBAAA,YAAA,GAAA,yDAAA;AACA,WAFA,MAEA;AACA,iBAAA,YAAA,GAAA,4CAAA;AACA;AACA;AACA,OAXA;AAYA;AA3BA;AAtBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container mt-3\">\r\n    <small class=\"text-muted\">{{ $options.__file }}</small>\r\n    <div class=\"row m-3\">\r\n      <div class=\"col-md-4 offset-md-4\">\r\n        <h1 class=\"text-center\">Imposta la tua password su Zuly</h1>\r\n        <h3 class=\"text-center text-muted\">(riservato ai negozi)</h3>\r\n        <form>\r\n          <p>Imposta la nuova password.</p>\r\n          <div class=\"mb-3\">\r\n            <label for=\"inputPassword\" class=\"form-label\">Password</label>\r\n            <input type=\"password\" class=\"form-control\" id=\"inputPassword\" v-model=\"password\">\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"inputPassword\" class=\"form-label\">Conferma la password</label>\r\n            <input type=\"password\" class=\"form-control\" id=\"inputPassword\" v-model=\"password1\">\r\n          </div>\r\n          <div class=\"alert-danger my-3\" v-show=\"checkPassword || errorMessage\">{{ checkPassword }}{{ errorMessage }}</div>\r\n          <div v-show=\"success\" class=\"text-muted my-3\">\r\n            <p>Il cambio della password del tuo account Zuly è andato a buon fine e abbiamo mandato un'email di conferma all'indirizzo indicato.</p>\r\n            <p>Adesso puoi <router-link to=\"/login\">effettuare il login</router-link>.</p>\r\n          </div>\r\n          <button :disabled=\"success\" type=\"button\" class=\"btn btn-primary\" v-on:click=\"setPassword()\">Imposta</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      token: '',\r\n      password: '',\r\n      password1: '',\r\n      errorMessage: '',\r\n      success: false\r\n    }\r\n  },\r\n  computed: {\r\n    checkPassword: function () {\r\n      if (this.password && this.password !== this.password1) {\r\n        return 'Le password non combaciano.'\r\n      } else {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n  mounted: function () {\r\n    this.token = this.$route.params.token\r\n  },\r\n  methods: {\r\n    async putRequest () {\r\n      let payload = {\r\n        token: this.token,\r\n        password: this.password\r\n      }\r\n      const response = await fetch('/api/passwd', {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      }\r\n      )\r\n      return response\r\n    },\r\n    setPassword: function () {\r\n      this.putRequest().then(response => {\r\n        if (response.ok) {\r\n          this.success = true\r\n          this.$parent.requestedRoute = ''\r\n        } else {\r\n          if (response.status === 401) {\r\n            this.errorMessage = 'Non puoi cambiare la password. Forse il link è scaduto?'\r\n          } else {\r\n            this.errorMessage = 'C\\'è stato un problema. Riprova più tardi.'\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\n"],"sourceRoot":"src/pages"}]}
{"remainingRequest":"D:\\working\\Vue\\zuly\\node_modules\\babel-loader\\lib\\index.js!D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\working\\Vue\\zuly\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\working\\Vue\\zuly\\src\\App.vue","mtime":1603837908114},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\working\\Vue\\zuly\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICdmb250c291cmNlLXZhcmVsYS9sYXRpbi5jc3MnOwppbXBvcnQgJ2ZvbnRzb3VyY2UtdmFyZWxhLXJvdW5kL2xhdGluLmNzcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHVibGljUGF0aDogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgICAgIHJlcXVlc3RlZFJvdXRlOiAnJywKICAgICAgYXV0aGVudGljYXRlZDogZmFsc2UsCiAgICAgIHRpdGxlOiAnWnVseScsCiAgICAgIGxpdmVfc3RyZWFtaW5nOiAnJywKICAgICAgaXNDaGFubmVsUmVhZHk6IGZhbHNlLAogICAgICBpc1N0YXJ0ZWQ6IGZhbHNlLAogICAgICBsb2NhbFN0cmVhbTogbnVsbCwKICAgICAgcGVlckNvbm5lY3Rpb246IG51bGwsCiAgICAgIHNvY2tldDogbnVsbAogICAgfTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5yZXF1ZXN0ZWRSb3V0ZSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTsKICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0ZWRSb3V0ZSA9ICcsIHRoaXMucmVxdWVzdGVkUm91dGUpOwoKICAgIGlmICh0aGlzLnJlcXVlc3RlZFJvdXRlID09PSAnL3Jlc2V0X3Bhc3N3b3JkJyB8fCB0aGlzLnJlcXVlc3RlZFJvdXRlLnN1YnN0cmluZygwLCAxMykgPT09ICcvc2V0X3Bhc3N3b3JkJykgewogICAgICAvLyB1bnNlY3VyZWQgcm91dGVzCiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmdldFNlc3Npb24oKS50aGVuKGRhdGEgPT4gewogICAgICBsZXQgaWQgPSBkYXRhPy5pZDsKICAgICAgY29uc29sZS5sb2coJ3VzZXJfaWQgPSAnLCBpZCk7CgogICAgICBpZiAoaWQpIHsKICAgICAgICB0aGlzLnNldEF1dGhlbnRpY2F0ZWQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmF1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKCiAgICAgICAgaWYgKHRoaXMucmVxdWVzdGVkUm91dGUgPT09ICcvbG9naW4nKSB7CiAgICAgICAgICB0aGlzLnJlcXVlc3RlZFJvdXRlID0gJyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCcvbG9naW4nKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFNlc3Npb24oKSB7CiAgICAgIC8vIHJldHVybnMgbG9nZ2VkIHVzZXIgaWQgaWYgbG9nZ2VkLCBlbHNlIHVuZGVmaW5lZAogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Nlc3Npb24nLCB7CiAgICAgICAgbW9kZTogJ25vLWNvcnMnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdhY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwogICAgfSwKCiAgICBhc3luYyBwZXJmb3JtTG9nb3V0KCkgewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3Nlc3Npb24nLCB7CiAgICAgICAgbWV0aG9kOiAnREVMRVRFJwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlc3BvbnNlLm9rOwogICAgfSwKCiAgICBsb2dvdXQoKSB7CiAgICAgIHRoaXMucGVyZm9ybUxvZ291dCgpLnRoZW4ob2sgPT4gewogICAgICAgIHRoaXMuYXV0aGVudGljYXRlZCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCgogICAgc2V0QXV0aGVudGljYXRlZCgpIHsKICAgICAgY29uc29sZS5sb2coJ2F1dGhlbnRpY2F0ZWQhJyk7CiAgICAgIHRoaXMuYXV0aGVudGljYXRlZCA9IHRydWU7CiAgICAgIGxldCBuZXdSb3V0ZSA9IHRoaXMucmVxdWVzdGVkUm91dGUgfHwgJy8nOwoKICAgICAgaWYgKG5ld1JvdXRlICE9PSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpIHsKICAgICAgICBjb25zb2xlLmxvZygnbW92aW5nIHRvICcsIG5ld1JvdXRlKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZShuZXdSb3V0ZSk7CiAgICAgIH0KICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,OAAA,6BAAA;AACA,OAAA,mCAAA;AAEA,eAAA;AACA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,OAAA,CAAA,GAAA,CAAA,QADA;AAEA,MAAA,cAAA,EAAA,EAFA;AAGA,MAAA,aAAA,EAAA,KAHA;AAIA,MAAA,KAAA,EAAA,MAJA;AAKA,MAAA,cAAA,EAAA,EALA;AAMA,MAAA,cAAA,EAAA,KANA;AAOA,MAAA,SAAA,EAAA,KAPA;AAQA,MAAA,WAAA,EAAA,IARA;AASA,MAAA,cAAA,EAAA,IATA;AAUA,MAAA,MAAA,EAAA;AAVA,KAAA;AAYA,GAdA;;AAeA,EAAA,OAAA,GAAA;AACA,SAAA,cAAA,GAAA,MAAA,CAAA,QAAA,CAAA,QAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,mBAAA,EAAA,KAAA,cAAA;;AACA,QAAA,KAAA,cAAA,KAAA,iBAAA,IAAA,KAAA,cAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA,MAAA,eAAA,EAAA;AACA;AACA;AACA;;AACA,SAAA,UAAA,GAAA,IAAA,CAAA,IAAA,IAAA;AACA,UAAA,EAAA,GAAA,IAAA,EAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,YAAA,EAAA,EAAA;;AACA,UAAA,EAAA,EAAA;AACA,aAAA,gBAAA;AACA,OAFA,MAEA;AACA,aAAA,aAAA,GAAA,KAAA;;AACA,YAAA,KAAA,cAAA,KAAA,QAAA,EAAA;AACA,eAAA,cAAA,GAAA,EAAA;AACA,SAFA,MAEA;AACA,eAAA,OAAA,CAAA,OAAA,CAAA,QAAA;AACA;AACA;AACA,KAbA;AAcA,GApCA;;AAqCA,EAAA,OAAA,EAAA;AACA,UAAA,UAAA,GAAA;AACA;AACA,YAAA,QAAA,GAAA,MAAA,KAAA,CAAA,cAAA,EAAA;AACA,QAAA,IAAA,EAAA,SADA;AAEA,QAAA,OAAA,EAAA;AACA,oBAAA;AADA;AAFA,OAAA,CAAA;AAMA,aAAA,QAAA,CAAA,IAAA,EAAA;AACA,KAVA;;AAWA,UAAA,aAAA,GAAA;AACA,YAAA,QAAA,GAAA,MAAA,KAAA,CAAA,cAAA,EAAA;AAAA,QAAA,MAAA,EAAA;AAAA,OAAA,CAAA;AACA,aAAA,QAAA,CAAA,EAAA;AACA,KAdA;;AAeA,IAAA,MAAA,GAAA;AACA,WAAA,aAAA,GAAA,IAAA,CAAA,EAAA,IAAA;AAAA,aAAA,aAAA,GAAA,KAAA;AAAA,OAAA;AACA,KAjBA;;AAkBA,IAAA,gBAAA,GAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gBAAA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,UAAA,QAAA,GAAA,KAAA,cAAA,IAAA,GAAA;;AACA,UAAA,QAAA,KAAA,MAAA,CAAA,QAAA,CAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,YAAA,EAAA,QAAA;AACA,aAAA,OAAA,CAAA,OAAA,CAAA,QAAA;AACA;AACA;;AA1BA;AArCA,CAAA","sourcesContent":["<template>\r\n  <div id=\"app\" class=\"bg-light\">\r\n    <small style=\"position: absolute;right: 10px;z-index: 100;\" class=\"text-light\">{{ $options.__file }}</small>\r\n    <nav class=\"navbar navbar-light bg-primary shadow-sm\">\r\n      <router-link to=\"/\" class=\"navbar-brand ml-3\">\r\n        <img :src=\"publicPath + 'logo.svg'\" width=\"100\" height=\"50\" alt=\"zuly logo\">\r\n      </router-link>\r\n      <span class=\"navbar-text h1 font-weight-bold\">{{ title }}</span>\r\n      <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\" aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n      </button>\r\n      <div class=\"collapse navbar-collapse\" id=\"navbarNavAltMarkup\">\r\n        <div class=\"navbar-nav text-center\">\r\n          <router-link class=\"nav-item nav-link\" to=\"/\">Home</router-link>\r\n          <router-link class=\"nav-item nav-link\" to=\"/about\">About</router-link>\r\n          <router-link class=\"nav-item nav-link\" v-show=\"authenticated\" to=\"/login\" v-on:click.native=\"logout()\" replace>Esci</router-link>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n    <router-link v-if=\"live_streaming\" tag=\"button\" class=\"btn btn-danger btn-sm mt-3 mb-3\" :to=\"live_streaming\" role=\"button\" style=\"position: fixed;right: 20px;\">\r\n      <img src=\"~bootstrap-icons/icons/camera-reels.svg\" alt=\"phone icon\" width=\"30\" height=\"30\"> on air\r\n    </router-link>\r\n    <router-view @authenticated=\"setAuthenticated\"/>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n$primary: #008e7d;\r\n$secondary: #75ac56;\r\n\r\nnav {\r\n  a {\r\n    &.router-link-exact-active {\r\n      color: blue!important;\r\n    }\r\n  }\r\n}\r\nvideo {\r\n  max-width: 100%;\r\n  width: 720px;\r\n  border-style: dashed;\r\n  display: block;\r\n}\r\n@import 'bootstrap';\r\n\r\nbody {\r\n  font-family : 'Varela', sans-serif !important;\r\n}\r\nh1, h2, h3 {\r\n  font-family: 'Varela Round', sans-serif;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport 'fontsource-varela/latin.css'\r\nimport 'fontsource-varela-round/latin.css'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      publicPath: process.env.BASE_URL,\r\n      requestedRoute: '',\r\n      authenticated: false,\r\n      title: 'Zuly',\r\n      live_streaming: '',\r\n      isChannelReady: false,\r\n      isStarted: false,\r\n      localStream: null,\r\n      peerConnection: null,\r\n      socket: null\r\n    }\r\n  },\r\n  mounted () {\r\n    this.requestedRoute = window.location.pathname\r\n    console.log('requestedRoute = ', this.requestedRoute)\r\n    if (this.requestedRoute === '/reset_password' || this.requestedRoute.substring(0, 13) === '/set_password') {\r\n      // unsecured routes\r\n      return\r\n    }\r\n    this.getSession().then(data => {\r\n      let id = data?.id\r\n      console.log('user_id = ', id)\r\n      if (id) {\r\n        this.setAuthenticated()\r\n      } else {\r\n        this.authenticated = false\r\n        if (this.requestedRoute === '/login') {\r\n          this.requestedRoute = ''\r\n        } else {\r\n          this.$router.replace('/login')\r\n        }\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    async getSession () {\r\n      // returns logged user id if logged, else undefined\r\n      const response = await fetch('/api/session', {\r\n        mode: 'no-cors',\r\n        headers: {\r\n          'accept': 'application/json'\r\n        }\r\n      })\r\n      return response.json()\r\n    },\r\n    async performLogout () {\r\n      const response = await fetch('/api/session', { method: 'DELETE' })\r\n      return response.ok\r\n    },\r\n    logout () {\r\n      this.performLogout().then(ok => { this.authenticated = false })\r\n    },\r\n    setAuthenticated () {\r\n      console.log('authenticated!')\r\n      this.authenticated = true\r\n      let newRoute = this.requestedRoute || '/'\r\n      if (newRoute !== window.location.pathname) {\r\n        console.log('moving to ', newRoute)\r\n        this.$router.replace(newRoute)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>"],"sourceRoot":"src"}]}